{"version":3,"sources":["components/currency/currency.tsx","components/currency/currency-input.tsx","components/currency/index.ts","services/api.ts","components/user/user-details.module.css","store/index.ts","store/store.ts","store/selector-hooks.ts","components/common/scroll-container/scroll-container.module.css","store/reducers/article.ts","services/error-handler.ts","store/reducers/search.ts","store/reducers/user.ts","store/reducers/setting.ts","store/reducers/transaction.ts","store/reducers/loader.ts","services/sound.ts","store/reducers/error.ts","store/reducers/index.ts","components/common/idle-timer.tsx","components/common/scanner.tsx","components/article/validator.tsx","components/ui/icons/trash.tsx","components/article/article-form.tsx","hooks/use-toggle.ts","components/article/article-edit-form-view.tsx","components/settings/scaling-buttons.tsx","hooks/use-storage.ts","components/common/scroll-container/scroll-container.tsx","components/common/nav-tab-menu.tsx","components/common/search-list/search-list.tsx","components/article/article-list.tsx","components/article/article-router.tsx","locales/en.ts","components/common/toast.tsx","components/common/error-message.tsx","components/ui/icons/logo.tsx","components/ui/icons/search.tsx","components/common/header-menu.tsx","components/ui/theme.ts","components/ui/icons/git-hub.tsx","components/ui/footer.tsx","components/common/search-results/search-result-item/search-result-item.tsx","components/metrics/metrics-view.tsx","components/metrics/user-metrics/metrics-view.tsx","components/user/create-user-transaction-link.tsx","components/user/user-name.tsx","components/user/user-card.tsx","components/user/user-selection.tsx","components/transaction/transaction-undo-button.tsx","components/transaction/validator.tsx","components/transaction/user-to-user-validator.tsx","components/transaction/create-user-transaction-form.tsx","components/article/article-scanner.tsx","components/transaction/create-custom-transaction-form.tsx","components/transaction/transaction-button.tsx","components/transaction/payment-button-steps.tsx","components/transaction/payment.tsx","components/ui/icons/shopping-bag.tsx","components/transaction/transaction-list-item.tsx","components/ui/icons/accept.tsx","components/user/user-multi-selection.tsx","components/transaction/split-invoice/split-invoice.tsx","components/ui/icons/transactions.tsx","components/ui/icons/product.tsx","components/paypal/paypal-transaction-form.tsx","components/paypal/paypal-transaction.tsx","components/user/user-router.tsx","components/article/article-selection-bubbles.tsx","components/user/views/user-article-transaction.tsx","components/ui/button.tsx","components/user/edit-user-form.tsx","components/user/views/user-edit-view.tsx","components/user-details/user-details-router.tsx","components/user-details/user-details-header.tsx","components/user-details/user-details-separator.tsx","components/common/scroll-to-top.ts","components/user/user-details.tsx","components/common/pager.tsx","components/transaction/transaction-table.tsx","components/user/views/transaction-overview.tsx","components/ui/icons/add.tsx","components/ui/icons/edit.tsx","components/user/create-user-inline-form.tsx","components/user/user-list.tsx","components/user/views/user.tsx","components/common/search-results/search-results.tsx","app.tsx","serviceWorker.js","index.tsx"],"names":["Currency","value","hidePlusSign","currency","style","getPlaceholder","placeholder","hasFocus","convertFormattedNumberToCents","rawValue","Number","replace","CurrencyInput","inputRef","React","state","lastPropValue","getValueFromProps","updateValue","e","cleanedNumber","props","noNegative","Math","abs","target","setState","el","current","window","setTimeout","selectionStart","selectionEnd","length","createTextRange","range","collapse","select","onChange","this","undefined","minimumFractionDigits","children","formattedValue","id","ref","color","onFocus","onBlur","type","autoFocus","API_URL","process","post","endpoint","params","a","options","mode","method","body","JSON","stringify","headers","fetch","then","res","json","get","restDelete","useEffectAsync","effect","inputs","useEffect","module","exports","reducers","article","error","loader","user","transaction","settings","search","reducer","combineReducers","store","createStore","useFilteredUsers","isActive","useMappedState","useCallback","getFilteredUserIds","useUser","getUser","useUserName","name","useUserBalance","getUserBalance","useActiveArticles","getArticleList","filter","usePopularArticles","getPopularArticles","useArticle","getArticleById","useSettings","getSettings","useIsPaymentEnabled","isPaymentEnabled","useUserArray","getUserArray","useUserState","getUserState","useGlobalError","getGlobalError","useIsTransactionDeletable","isTransactionDeletable","useTransaction","ArticleTypes","handleApiError","dispatch","config","Object","keys","errors","key","class","indexOf","setGlobalError","defaultError","errorHandler","LoaderTypes","GlobalLoader","promise","setLoader","data","articlesLoaded","payload","startLoadingArticles","articles","startDeletingArticle","articleId","getArticleByBarcode","barcode","Error","startAddArticle","url","precursor","SearchTypes","initialState","action","reduce","nextState","getArticle","values","sort","b","localeCompare","usageCount","UserActionTypes","SettingsTypes","query","UpdateSearchAction","userDetailsLoaded","UserDetailsLoaded","startLoadingUserDetails","details","startLoadingUsers","deleted","active","toString","paramString","param","index","UsersLoaded","startCreatingUser","UserAlreadyExistsException","startUpdateUser","userId","users","TransactionTypes","TransactionsLoaded","getUserFromStateOrPayload","transactions","nextTransactions","getSearch","getSearchQuery","activeFilteredUsers","isDisabled","map","toLowerCase","includes","balance","settingsLoaded","SettingsLoaded","startLoadingSettings","enabled","autoOpen","common","idleTimeout","paypal","recipient","fee","sandbox","stalePeriod","i18n","dateFormat","timezone","language","symbol","alpha3","account","boundary","upper","lower","payment","undo","delete","timeout","splitInvoice","deposit","custom","steps","dispense","getPayment","getPayPal","isDepositActive","Boolean","Howl","src","transactionsLoaded","startLoadingTransactions","offset","limit","startCreatingTransaction","play","startDeletingTransaction","transactionId","getTransactionState","getTransaction","isDeletable","SetLoader","ErrorTypes","SetError","setError","GlobalError","getError","timerId","WrappedIdleTimer","withRouter","onTimeOut","resetTimer","clearTimeout","document","addEventListener","removeEventListener","useIdleTimer","history","push","Scanner","maybeBarcode","createRef","detection","event","focus","test","render","opacity","hidden","tabIndex","Component","useArticleValidator","userBalance","newValue","ArticleValidator","isValid","Trash","width","height","xmlns","viewBox","d","ToggleArticleButton","isVisible","Icon","idArticle","onClick","isRound","ArticleFormGrid","styled","Flex","display","textAlign","div","input","margin","fontSize","marginRight","label","ArticleGrid","cursor","gridGap","gridTemplateColumns","TextRight","initialParams","amount","resetArticle","setParams","ArticleForm","useState","toggle","setToggle","updateToggle","useToggle","isValidArticle","useDispatch","submit","preventDefault","onCreated","alignItems","flex","padding","level","justifyContent","htmlFor","required","onSubmit","disabled","ArticleEditFormView","match","goBack","useScalingState","initialValue","localStorage","getItem","parse","item","setInnerValue","setItem","useLocalStorage","scaling","setScaling","increment","location","reload","decrement","ScalingButtons","ScrollContainer","className","styles","container","Tabs","Tab","NavLink","IconNav","alignContent","button","NavTabMenus","tabs","tab","to","activeClassName","message","useInfiniteScrolling","items","PAGE_SIZE","noScrollBarPageOffset","page","setPage","nextPage","pageItems","slice","hasVScroll","scrollHeight","clientHeight","dataLength","next","hasMore","SearchList","pageSize","renderItem","updateFilter","filteredItems","setFilteredItems","InfiniteList","infiniteProps","ArticleList","breakpoint","ArticleRouter","path","exact","component","from","en","BALANCE_DISPENSE","BALANCE_PLACEHOLDER","BALANCE_DEPOSIT","BALANCE_TITLE","ARTICLE_HEADLINE","ARTICLE_LINK","ARTICLE_ADD_LINK","ARTICLE_ADD_FORM_NAME_LABEL","ARTICLE_ADD_FORM_BARCODE_LABEL","ARTICLE_ADD_FORM_AMOUNT_LABEL","ARTICLE_LOADING_BY_BARCODE","ARTICLE_FETCHED_BY_BARCODE","ARTICLES_COULD_NOT_BE_LOADED","ARTICLE_COULD_NOT_BE_CREATED","ARTICLE_COULD_NOT_BE_LOADED_BY_BARCODE","TALLY_HEADER","USERS_LOADING_FAILED","USERS_CREATION_FAILED","USERS_CREATION_FAILED_USER_EXIST","USER_EDIT_USER_FAILED","USER_SEARCH_LINK","USER_ARTICLE_LINK","USER_SEARCH_HEADLINE","USER_ACTIVE","USER_INACTIVE","USER_ACTIVE_LINK","USER_INACTIVE_LINK","USER_TRANSACTIONS","USER_TRANSACTIONS_LINK","USER_TRANSACTIONS_LOADING_ERROR","USER_TRANSACTION_CREATION_ERROR","USER_TRANSACTION_DELETION_ERROR","USER_TRANSACTIONS_SENDER","USER_TRANSACTIONS_TABLE_ARTICLE","USER_TRANSACTIONS_TABLE_SENDER","USER_TRANSACTIONS_TABLE_RECIPIENT","USER_TRANSACTIONS_TABLE_COMMENT","USER_TRANSACTIONS_TABLE_AMOUNT","USER_TRANSACTIONS_TABLE_CREATED","USER_TRANSACTIONS_TABLE_LOAD_NEXT_ROWS","USER_TRANSACTIONS_RECIPIENT","USER_TRANSACTION_CREATE","USER_TRANSACTION_CREATE_SUBMIT_TITLE","USER_TRANSACTION_CREATE_LINK","USER_TRANSACTION_CREATE_CUSTOM_HEADLINE","USER_TRANSACTION_CREATE_CUSTOM_DEPOSIT_BUTTON","USER_TRANSACTION_CREATE_CUSTOM_DISPENSE_BUTTON","USER_TRANSACTION_FROM_AMOUNT_LABEL","USER_TRANSACTION_UNDO","USER_SELECTION_LIST_LABEL","USER_CREATE_HEADLINE","USER_CREATE_TRIGGER","USER_CREATE_NAME_LABEL","USER_EDIT_LINK","USER_EDIT_HEADLINE","USER_EDIT_TRIGGER","USER_EDIT_NAME_LABEL","USER_EDIT_MAIL_LABEL","USER_EDIT_ACTIVE_LABEL","USER_EDIT_ACTIVE_WARNING","PAYMENT_DEPOSIT_LABEL","PAYMENT_DISPENSE_LABEL","BACK_BUTTON","SETTINGS_LOADED_FAILED","PAGER_PREV","PAGER_NEXT","SEARCH","CREATE_USER_TO_USER_TRANSACTION_SUCCESS","CREATE_USER_TO_USER_TRANSACTION_USER","CREATE_USER_TO_USER_TRANSACTION_COMMENT","TRANSACTION_EMPTY_STATE","METRICS_HEADLINE","ARTICLE_ACTIVE_HEADLINE","ARTICLE_INACTIVE_HEADLINE","SPLIT_INVOICE_LINK","SPLIT_INVOICE_HEADLINE","SPLIT_INVOICE_SUBMIT","Toast","timeoutId","onFadeOut","fadeOutSeconds","cardProps","theme","white","background","red","ErrorMessage","bottom","Logo","SearchIcon","navLinkStyle","HeaderMenu","defaultMessage","minWidth","paddingLeft","paddingRight","marginLeft","baseCss","GitHubIcon","MainFooter","rel","href","SearchResultItemButton","Button","marginBottom","SearchResultItem","LazyMetrics","lazy","MetricsView","fallback","UserMetricsView","Wrapper","maxWidth","center","UserName","UserCard","flexDirection","hover","UserSelection","filteredUsers","TransactionUndoButton","onSuccess","isTransactionValid","accountBoundary","paymentBoundary","isDeposit","accountBoundaryValue","paymentBoundaryValue","checkDepositIsValid","checkDispenseIsValid","useTransactionValidator","UserToUserValidator","userHasTheMoney","receiverCanAcceptTheMoney","targetUserId","AcceptWrapper","withTheme","svg","fill","green","selectedAmount","hasSelectionReady","selectedUser","created","createdTransactionId","comment","CreateUserTransactionForm","submitUserId","handleSubmit","createTransaction","recipientId","setComment","tabletColumns","text","onSelect","title","ArticleScanner","setMessage","setArticle","handleChange","ToastContent","ButtonText","fontWeight","lineHeight","CreateCustomTransactionForm","intl","useIntl","transactionCreated","setValue","depositIsValid","dispenseIsValid","result","columns","formatMessage","TransactionButton","GreenButton","RedButton","PaymentButtonList","multiplier","step","Payment","ShoppingBagIcon","InLineLink","Link","ArticleIcon","primary","ResponsiveGrid","ListItemDescription","isSender","composedComment","getUserDetailLink","TransactionListItem","lineThrough","isDeleted","sender","AcceptIcon","points","UserMultiSelection","excludeUserId","validation","excludeIds","errorMessageMap","getItemIndex","itemToString","isLoading","participants","responseState","GridContainer","P","NotificationContainer","TextCenter","Block","SplitInvoiceForm","resetState","submitSplitInvoice","forEach","participant","formIsValid","getParams","getSplitAmount","setRecipient","setAmount","updateValidation","addParticipant","removeParticipant","userToRemove","getRecipientUserId","getLengthOfParticipantsAndRecipient","isNaN","submitIsValid","showNotification","getTransactionId","hasErrorState","getState","acc","every","find","userName","TransactionIcon","ProductIcon","form","grow","PayPalTransactionForm","memo","formRef","useRef","numberAmount","BASE_URL","returnUrl","returnCancelUrl","H2","PayPalTransaction","paidAmount","response","InputSection","ArticleSelectionBubbles","setQuery","onCancel","flexWrap","UserArticleTransaction","AcceptButton","buttonAcceptFont","hasShadow","buttonAcceptBackground","UserEditForm","setName","email","setEmail","setDisabled","onDisabled","onSave","minLength","maxLength","checked","navigateToUserDetails","UserEditView","navigateHome","UserDetailRouter","LinkTab","UserHeader","h1","textTransform","breakPoints","tablet","toggleTab","currentUrl","userUrl","UserDetailsHeader","pathname","UserDetailsSeparator","ScrollToTop","scrollTo","UserDetails","blur","userDetailsGrid","getUserTransactionsLink","isPrevDisabled","currentPage","isNextDisabled","itemCount","getPageCount","Pager","pageDown","pageUp","lastPage","TransactionTable","onPageChange","getLimitAndOffset","loadRows","count","TransactionPage","TransactionOverview","AddIcon","isPrimary","transform","EditIcon","Trigger","overflow","transition","border","borderRadius","themedWhite","RedBlackButton","backgroundColor","CreateUserInlineFormView","trimmedName","trim","UserList","userIds","PlainUserList","getUserDetailUrl","useUserDetailUrl","rows","InfiniteUserList","marginTop","GridWrapper","CreateUserPosition","zIndex","position","left","User","showCreateUserForm","UserRouter","redirect","SearchResults","userArray","userDetailUrl","newLight","light","greenLight","greenText","newDark","dark","redLight","Grid","gridTemplateRows","minHeight","TouchStyles","navigator","msMaxTouchPoints","Layout","resetCss","App","themes","Provider","textComponent","locale","messages","hashType","isLocalhost","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","catch","ReactDOM","getElementById","URL","origin","contentType","status","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.cf9c3b1c.chunk.js","sourcesContent":["import * as React from 'react';\nimport { FormattedNumber } from 'react-intl';\n\ninterface Props {\n  value: number;\n  hidePlusSign?: boolean;\n}\n\nexport function Currency({ value, hidePlusSign }: Props): JSX.Element {\n  return (\n    <>\n      {value > 0 && !hidePlusSign ? '+' : ''}\n      <FormattedNumber currency=\"EUR\" value={value / 100} style=\"currency\" />\n    </>\n  );\n}\n","import { Input } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedNumber } from 'react-intl';\n\nfunction getPlaceholder(\n  placeholder: string | undefined,\n  value: string,\n  hasFocus: boolean\n): string {\n  return !placeholder || value !== '0.00' || hasFocus ? value : placeholder;\n}\n\nexport function convertFormattedNumberToCents(rawValue: string): number {\n  return Number(rawValue.replace(/(-(?!\\d))|[^0-9|-]/g, ''));\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction moveCursorToEnd(el: any): void {\n  window.setTimeout(() => {\n    if (typeof el.selectionStart === 'number') {\n      el.selectionStart = el.selectionEnd = el.value.length;\n    } else if (typeof el.createTextRange !== 'undefined') {\n      const range = el.createTextRange();\n      range.collapse(false);\n      range.select();\n    }\n  }, 1);\n}\n\ninterface State {\n  lastPropValue: number | undefined;\n  value: number;\n  hasFocus: boolean;\n}\n\ninterface Props {\n  noNegative?: boolean;\n  placeholder?: string;\n  value?: number;\n  autoFocus?: boolean;\n  id?: string;\n  onChange?(value: number): void;\n}\n\nexport class CurrencyInput extends React.Component<Props, State> {\n  public inputRef = React.createRef();\n  public state = {\n    lastPropValue: 0,\n    value: this.getValueFromProps(),\n    hasFocus: false,\n  };\n\n  public getValueFromProps(): number {\n    return this.props.value ? this.props.value / 100 : 0;\n  }\n\n  public componentDidUpdate(): void {\n    if (this.props.value === undefined) {\n      return;\n    }\n\n    if (this.state.lastPropValue !== this.props.value) {\n      const value = this.getValueFromProps();\n      this.setState({ lastPropValue: this.props.value, value });\n    }\n  }\n\n  public updateValue = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const cleanedNumber = this.props.noNegative\n      ? Math.abs(convertFormattedNumberToCents(e.target.value))\n      : convertFormattedNumberToCents(e.target.value);\n    this.setState({ value: cleanedNumber / 100 }, () => {\n      if (this.inputRef && this.inputRef.current) {\n        moveCursorToEnd(this.inputRef.current);\n      }\n    });\n    if (this.props.onChange) {\n      this.props.onChange(cleanedNumber);\n    }\n  };\n\n  public render(): JSX.Element {\n    return (\n      <>\n        <FormattedNumber\n          minimumFractionDigits={2}\n          value={this.state.value}\n          children={(formattedValue: string) => (\n            <Input\n              id={this.props.id}\n              // @ts-ignore\n              ref={this.inputRef}\n              style={{\n                color:\n                  getPlaceholder(\n                    this.props.placeholder,\n                    formattedValue,\n                    this.state.hasFocus\n                  ) === this.props.placeholder\n                    ? '#8e8e8e'\n                    : undefined,\n              }}\n              placeholder={this.props.placeholder}\n              value={getPlaceholder(\n                this.props.placeholder,\n                formattedValue,\n                this.state.hasFocus\n              )}\n              onFocus={() => this.setState({ hasFocus: true })}\n              onBlur={() =>\n                this.setState({\n                  hasFocus: false,\n                })\n              }\n              onChange={this.updateValue}\n              type=\"tel\"\n              autoFocus={this.props.autoFocus}\n            />\n          )}\n        />\n      </>\n    );\n  }\n}\n","export * from './currency';\nexport * from './currency-input';\n","import { useEffect } from 'react';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\ndeclare const process: any;\n\nconst API_URL = process.env.REACT_APP_API;\n\nexport async function fetchJson(\n  endpoint: string,\n  options: RequestInit = {}\n): Promise<any> {\n  return fetch(`${API_URL}${endpoint}`, options).then(async res => res.json());\n}\n\nexport async function post(endpoint: string, params: any): Promise<any> {\n  const options: RequestInit = {\n    mode: 'cors',\n    method: 'POST',\n    body: JSON.stringify(params),\n    headers: { 'Content-Type': 'application/json; charset=utf-8' },\n  };\n  return fetch(`${API_URL}${endpoint}`, options).then(async res => res.json());\n}\n\nexport async function get(endpoint: string): Promise<any> {\n  return fetch(`${API_URL}${endpoint}`).then(async res => res.json());\n}\n\nexport async function restDelete(endpoint: string): Promise<any> {\n  return fetch(`${API_URL}${endpoint}`, {\n    method: 'delete',\n  }).then(async res => res.json());\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function useEffectAsync(effect: any, inputs: any[] = []): void {\n  useEffect(() => {\n    effect();\n  }, inputs);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userDetailsGrid\":\"user-details_userDetailsGrid__1MvRg\",\"transactions\":\"user-details_transactions__30c7X\",\"payment\":\"user-details_payment__27wei\"};","export * from './action';\nexport * from './store';\nexport * from './selector-hooks';\n","import { combineReducers, createStore } from 'redux';\n\nimport { Action } from './';\nimport {\n  article,\n  error,\n  loader,\n  search,\n  settings,\n  transaction,\n  user,\n} from './reducers';\n\nconst reducers = {\n  article,\n  error,\n  loader,\n  user,\n  transaction,\n  settings,\n  search,\n};\n\nexport type AppState = {\n  [K in keyof typeof reducers]: ReturnType<typeof reducers[K]>\n};\n\nexport const reducer = combineReducers<AppState>(reducers);\n\nexport const store = createStore<AppState, Action, { dispatch: Dispatch }, {}>(\n  reducer\n);\n\nexport interface Dispatch {\n  (action: Action): Action;\n}\n","import { useCallback } from 'react';\nimport { useMappedState } from 'redux-react-hook';\nimport { AppState } from '.';\nimport {\n  Article,\n  User,\n  getArticleById,\n  getArticleList,\n  getPayPal,\n  getPopularArticles,\n  getSettings,\n  getUser,\n  getUserArray,\n  getUserBalance,\n  getUserState,\n  getFilteredUserIds,\n  getGlobalError,\n  isTransactionDeletable,\n  isPaymentEnabled,\n  Transaction,\n} from './reducers';\n\nexport function useFilteredUsers(isActive: boolean) {\n  return useMappedState<string[]>(\n    useCallback(state => getFilteredUserIds(state, isActive), [isActive])\n  );\n}\n\nexport function useUser(id: string) {\n  const user = useMappedState<User | undefined>(\n    useCallback(state => getUser(state, id), [id])\n  );\n  return user;\n}\n\nexport function useUserName(id: string): string {\n  const user = useMappedState<User | undefined>(\n    useCallback(state => getUser(state, id), [id])\n  );\n  return user ? user.name : '';\n}\n\nexport function useUserBalance(id: string): number {\n  return useMappedState<number>(\n    useCallback(state => getUserBalance(state, id), [id])\n  );\n}\n\nexport function useArticles(): Article[] {\n  return useMappedState<Article[]>(getArticleList);\n}\n\nexport function useActiveArticles(isActive: boolean): Article[] {\n  const articles = useArticles();\n\n  return articles.filter(article => article.isActive === isActive);\n}\n\nexport function usePopularArticles(): Article[] {\n  return useMappedState<Article[]>(getPopularArticles);\n}\n\nexport function useArticle(id: number | undefined) {\n  return useMappedState<Article | undefined>(\n    useCallback((state: AppState) => getArticleById(state, id || 0), [id])\n  );\n}\n\nexport function usePayPalSettings() {\n  return useMappedState(getPayPal);\n}\n\nexport function useSettings() {\n  return useMappedState(getSettings);\n}\n\nexport function useIsPaymentEnabled() {\n  return useMappedState(isPaymentEnabled);\n}\n\nexport function useUserArray() {\n  return useMappedState(getUserArray);\n}\n\nexport function useUserState() {\n  return useMappedState(getUserState);\n}\n\nexport function useGlobalError() {\n  return useMappedState(getGlobalError);\n}\n\nexport function useIsTransactionDeletable(id: number) {\n  return useMappedState<boolean>(\n    useCallback((state: AppState) => isTransactionDeletable(state, id), [id])\n  );\n}\n\nexport function useTransaction(id: number) {\n  return useMappedState<Transaction | undefined>(\n    useCallback((state: AppState) => state.transaction[id], [id])\n  );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"scroll-container_container__3uW1F\"};","import { get, post, restDelete } from '../../services/api';\nimport { MaybeResponse, errorHandler } from '../../services/error-handler';\nimport { Action } from '../action';\nimport { AppState, Dispatch } from '../store';\n\nexport interface ArticleResponse extends MaybeResponse {\n  articles: Article[];\n}\n\nexport interface Article {\n  id: number;\n  name: string;\n  barcode: string;\n  amount: number;\n  isActive: boolean;\n  usageCount: number;\n  precursor?: Article;\n  created: string;\n}\n\nexport enum ArticleTypes {\n  articlesLoaded = 'articlesLoaded',\n}\n\nexport interface ArticlesLoadedAction {\n  type: ArticleTypes.articlesLoaded;\n  payload: Article[];\n}\n\nexport function articlesLoaded(payload: Article[]): ArticlesLoadedAction {\n  return {\n    type: ArticleTypes.articlesLoaded,\n    payload,\n  };\n}\n\nexport async function startLoadingArticles(\n  dispatch: Dispatch,\n  isActive: boolean\n): Promise<void> {\n  const promise = get(`article?limit=999&active=${isActive}&ancestor=false`);\n  const data = await errorHandler<ArticleResponse>(dispatch, {\n    promise,\n    defaultError: 'ARTICLES_COULD_NOT_BE_LOADED',\n  });\n  if (data && data.articles && data.articles.length) {\n    dispatch(articlesLoaded(data.articles));\n  }\n}\n\nexport async function startDeletingArticle(\n  dispatch: Dispatch,\n  articleId: number\n): Promise<void> {\n  const promise = restDelete(`article/${articleId}`);\n  const data = await errorHandler(dispatch, {\n    promise,\n    defaultError: 'ARTICLES_COULD_NOT_BE_DELETED',\n  });\n  if (data && data.article) {\n    dispatch(articlesLoaded([data.article]));\n    return data.article;\n  }\n  return undefined;\n}\n\nexport async function getArticleByBarcode(\n  dispatch: Dispatch,\n  barcode: string\n): Promise<Article | undefined> {\n  const promise = get(`article?barcode=${barcode}`);\n  const data = await errorHandler<ArticleResponse>(dispatch, {\n    promise,\n    defaultError: 'ARTICLE_COULD_NOT_BE_LOADED_BY_BARCODE',\n  });\n  if (data && data.articles && data.articles.length) {\n    dispatch(articlesLoaded(data.articles));\n    return data.articles[0];\n  } else {\n    throw Error('no articles are matching the barcode');\n  }\n}\n\nexport interface AddArticleParams {\n  name: string;\n  barcode: string;\n  amount: number;\n  isActive: boolean;\n  precursor: Article | null;\n}\nexport async function startAddArticle(\n  dispatch: Dispatch,\n  article: AddArticleParams\n): Promise<Article | undefined> {\n  const url = article.precursor ? `article/${article.precursor.id}` : 'article';\n  const promise = post(url, article);\n  const data = await errorHandler(dispatch, {\n    promise,\n    defaultError: 'ARTICLE_COULD_NOT_BE_CREATED',\n  });\n  if (data && data.article) {\n    dispatch(articlesLoaded([data.article]));\n    if (data.article.precursor) {\n      dispatch(articlesLoaded([data.article.precursor]));\n    }\n    return data.article;\n  }\n  return undefined;\n}\n\nexport type ArticleActions = ArticlesLoadedAction;\n\ninterface ArticleState {\n  [key: number]: Article;\n}\n\nconst initialState: ArticleState = {};\n\nexport function article(\n  state: ArticleState = initialState,\n  action: Action\n): ArticleState {\n  switch (action.type) {\n    case ArticleTypes.articlesLoaded:\n      return action.payload.reduce((nextState, article) => {\n        return { ...nextState, [article.id]: article };\n      }, state);\n    default:\n      return state;\n  }\n}\n\nexport function getArticle(state: AppState): ArticleState {\n  return state.article;\n}\n\nexport function getArticleById(\n  state: AppState,\n  id: number\n): Article | undefined {\n  return getArticle(state)[id];\n}\n\nexport function getArticleList(state: AppState): Article[] {\n  return Object.values(getArticle(state)).sort((a: Article, b: Article) =>\n    a.name.localeCompare(b.name)\n  );\n}\n\nexport function getPopularArticles(state: AppState): Article[] {\n  return getArticleList(state).sort((a, b) => b.usageCount - a.usageCount);\n}\n","import { Dispatch } from '../store';\nimport { LoaderTypes, setGlobalError, setLoader } from '../store/reducers';\n\nfunction handleApiError(\n  dispatch: Dispatch,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  config: ErrorConfig<any>,\n  error: { class: string }\n): void {\n  const [key] = Object.keys(config.errors || {}).filter(key =>\n    error.class.indexOf(key)\n  );\n\n  if (key && config.errors && config.errors[key]) {\n    dispatch(setGlobalError(config.errors[key]));\n  } else {\n    dispatch(setGlobalError(config.defaultError || ''));\n  }\n}\n\nexport interface MaybeResponse {\n  error?: {\n    class: string;\n  };\n}\n\nexport interface ErrorConfig<Result> {\n  loader?: LoaderTypes;\n  errors?: {};\n  defaultError?: string;\n  promise: Promise<Result>;\n}\nexport async function errorHandler<Result extends MaybeResponse>(\n  dispatch: Dispatch,\n  config: ErrorConfig<Result>\n): Promise<Result | undefined> {\n  const {\n    loader = LoaderTypes.GlobalLoader,\n    promise,\n    defaultError = '',\n  } = config;\n  dispatch(setLoader({ [loader]: true }));\n  dispatch(setGlobalError(''));\n  try {\n    const data = await promise;\n    dispatch(setLoader({ [loader]: false }));\n    if (data.error) {\n      handleApiError(dispatch, config, data.error);\n      return undefined;\n    } else {\n      return data;\n    }\n  } catch (e) {\n    dispatch(setGlobalError(defaultError));\n    dispatch(setLoader({ [loader]: false }));\n    return undefined;\n  }\n}\n","import { Action } from '../action';\nimport { AppState } from '../store';\n\nexport enum SearchTypes {\n  UpdateSearchAction = 'UpdateSearchAction',\n}\n\nexport interface UpdateSearchAction {\n  type: SearchTypes.UpdateSearchAction;\n  payload: Search;\n}\n\nexport function updateSearch(payload: Search): UpdateSearchAction {\n  return {\n    type: SearchTypes.UpdateSearchAction,\n    payload,\n  };\n}\nexport type UpdateSearch = typeof updateSearch;\n\nexport type SearchActions = UpdateSearchAction;\n\ninterface Search {\n  query: string;\n}\n\nconst initialState: Search = { query: '' };\n\nexport function search(state: Search = initialState, action: Action): Search {\n  switch (action.type) {\n    case SearchTypes.UpdateSearchAction:\n      return { ...state, ...action.payload };\n    default:\n      return state;\n  }\n}\n\nexport function getSearch(state: AppState): Search {\n  return state.search;\n}\n\nexport function getSearchQuery(state: AppState): string {\n  return getSearch(state).query;\n}\n","import { Transaction, TransactionTypes } from '.';\nimport { Action } from '..';\nimport { get, post } from '../../services/api';\nimport { errorHandler } from '../../services/error-handler';\nimport { AppState, Dispatch } from '../store';\nimport { getSearchQuery } from './search';\n\nexport interface GetUsersResponse {\n  users: User[];\n}\n\nexport interface User {\n  id: string;\n  name: string;\n  isActive: boolean;\n  isDisabled?: boolean;\n  email?: string | null;\n  balance: number;\n  created: string;\n  updated?: string;\n  transactions?: { [key: number]: number };\n}\n\nexport interface UsersState {\n  [id: string]: User;\n}\n\nexport interface Boundaries {\n  upper: number;\n  lower: number;\n}\n\nexport interface RootObject {\n  boundaries: Boundaries;\n}\n\nexport enum UserActionTypes {\n  StartLoadingUsers = '[USER] Start_Loading',\n  StartLoadingUserDetails = '[USER] Start_Loading_Details',\n  UserDetailsLoaded = '[USER] Loaded_Details',\n  UsersLoaded = '[USER] Loaded',\n  UsersLoadedFailed = '[USER] Loaded Failed',\n}\n\nexport interface UserDetailsLoadedAction {\n  type: UserActionTypes.UserDetailsLoaded;\n  payload: User;\n}\nexport function userDetailsLoaded(payload: User): UserDetailsLoadedAction {\n  return {\n    type: UserActionTypes.UserDetailsLoaded,\n    payload,\n  };\n}\n\nexport async function startLoadingUserDetails(\n  dispatch: Dispatch,\n  id: string\n): Promise<void> {\n  const details = await get(`user/${id}`);\n  dispatch(userDetailsLoaded(details.user));\n}\n\nexport interface UsersLoadedAction {\n  type: UserActionTypes.UsersLoaded;\n  payload: GetUsersResponse;\n}\nexport function usersLoaded(payload: GetUsersResponse): UsersLoadedAction {\n  return {\n    type: UserActionTypes.UsersLoaded,\n    payload,\n  };\n}\n\nexport async function startLoadingUsers(\n  dispatch: Dispatch,\n  isActive?: boolean\n): Promise<void> {\n  const params: { deleted?: string; active?: string } = {};\n  params.deleted = 'false';\n  if (isActive !== undefined) {\n    params.active = isActive.toString();\n  }\n  const promise = get(\n    `user${Object.keys(params).reduce((paramString, param, index) => {\n      const next = `${paramString}${index === 0 ? '?' : '&'}${param}=${\n        params[param]\n      }`;\n      return next;\n    }, '')}`\n  );\n  const data = await errorHandler(dispatch, {\n    promise,\n    defaultError: 'USERS_LOADING_FAILED',\n  });\n  if (data) {\n    dispatch(usersLoaded(data));\n  }\n}\n\nexport async function startCreatingUser(\n  dispatch: Dispatch,\n  name: string\n): Promise<User | undefined> {\n  const promise = post('user', {\n    name,\n  });\n  const data = await errorHandler(dispatch, {\n    promise,\n    defaultError: 'USERS_CREATION_FAILED',\n    errors: {\n      UserAlreadyExistsException: 'USERS_CREATION_FAILED_USER_EXIST',\n    },\n  });\n\n  if (data && data.user) {\n    dispatch(userDetailsLoaded(data.user));\n    return data.user;\n  }\n\n  return undefined;\n}\nexport interface UserUpdateParams {\n  name: string;\n  email?: string;\n  isDisabled: boolean;\n}\nexport async function startUpdateUser(\n  dispatch: Dispatch,\n  userId: string,\n  params: UserUpdateParams\n): Promise<User | undefined> {\n  const promise = post(`user/${userId}`, params);\n  const data = await errorHandler(dispatch, {\n    promise,\n    defaultError: 'USER_EDIT_USER_FAILED',\n    errors: {\n      UserAlreadyExistsException: 'USERS_CREATION_FAILED_USER_EXIST',\n    },\n  });\n  if (data && data.user) {\n    dispatch(userDetailsLoaded(data.user));\n    return data.user;\n  }\n\n  return undefined;\n}\n\nfunction getUserFromStateOrPayload(\n  state: UsersState,\n  transaction?: Transaction\n): User | undefined {\n  if (!transaction) {\n    return undefined;\n  }\n\n  const userId = transaction.user.id;\n  return state[userId] ? state[userId] : transaction.user;\n}\n\nexport type UserActions = UsersLoadedAction | UserDetailsLoadedAction;\n\nexport function user(state: UsersState = {}, action: Action): UsersState {\n  switch (action.type) {\n    case UserActionTypes.UsersLoaded:\n      return action.payload.users.reduce(\n        (users: UsersState, user: User) => ({\n          ...users,\n          [user.id]: { ...state[user.id], ...user },\n        }),\n        state\n      );\n    case UserActionTypes.UserDetailsLoaded:\n      return {\n        ...state,\n        [action.payload.id]: { ...state[action.payload.id], ...action.payload },\n      };\n    case TransactionTypes.TransactionsLoaded:\n      // eslint-disable-next-line no-case-declarations\n      const user = getUserFromStateOrPayload(state, action.payload[0]);\n      if (!user) {\n        return state;\n      }\n      return {\n        ...state,\n        [user.id]: {\n          ...user,\n          transactions: action.payload.reduce(\n            (nextTransactions, transaction) => {\n              return { ...nextTransactions, [transaction.id]: transaction.id };\n            },\n            user.transactions\n          ),\n        },\n      };\n    default:\n      return state;\n  }\n}\n\nexport function getUserState(state: AppState): UsersState {\n  return state.user;\n}\n\nexport function getUserArray(state: AppState): User[] {\n  return Object.values(getUserState(state)).sort((a: User, b: User) =>\n    a.name.localeCompare(b.name)\n  );\n}\n\nexport function getUser(state: AppState, userId: string): User | undefined {\n  return getUserState(state)[userId];\n}\n\nexport function getFilteredUserIds(\n  state: AppState,\n  isActive: boolean\n): string[] {\n  const query = getSearchQuery(state);\n  const activeFilteredUsers = getUserArray(state).filter(\n    user => user.isActive === isActive && user.isDisabled === false\n  );\n  if (!query) {\n    activeFilteredUsers.map(user => user.id);\n  }\n\n  return activeFilteredUsers\n    .filter(user => user.name.toLowerCase().includes(query.toLowerCase()))\n    .map(user => user.id);\n}\n\nexport function getUserBalance(state: AppState, userId: string): number {\n  const user = getUser(state, userId);\n  return user ? user.balance : 0;\n}\n\nexport function getUserTransactionsArray(\n  state: AppState,\n  userId: string\n): number[] {\n  const user = getUser(state, userId);\n  if (user && user.transactions) {\n    return Object.values(user.transactions).sort(\n      (a, b) => Number(b) - Number(a)\n    );\n  } else {\n    return [];\n  }\n}\n","import { get } from '../../services/api';\nimport { MaybeResponse, errorHandler } from '../../services/error-handler';\nimport { Action } from '../action';\nimport { AppState, Dispatch } from '../store';\n\nexport enum SettingsTypes {\n  StartLoadingSettings = 'START_LOADING_SETTINGS',\n  SettingsLoaded = 'SETTINGS_LOADED',\n}\n\nexport interface SettingsResponse extends MaybeResponse {\n  settings: Settings;\n}\n\nexport interface Settings {\n  i18n: I18N;\n  article: Article;\n  account: Account;\n  payment: Payment;\n  paypal: Paypal;\n  user: User;\n  common: {\n    idleTimeout: number;\n  };\n}\n\nexport interface Payment {\n  boundary: Boundary;\n  transactions: Transactions;\n  deposit: Deposit;\n  dispense: Deposit;\n}\n\nexport interface Boundary {\n  upper: number | boolean;\n  lower: number | boolean;\n}\n\nexport interface SettingsLoadedAction {\n  type: SettingsTypes.SettingsLoaded;\n  payload: Settings;\n}\n\nexport interface Setting {\n  settings: Settings;\n}\n\nexport interface Settings {\n  i18n: I18N;\n  account: Account;\n  payment: Payment;\n}\n\nexport interface Account {\n  boundary: Boundary;\n}\n\ninterface Article {\n  enabled: boolean;\n  autoOpen: boolean;\n}\n\n// tslint:disable-next-line:interface-name\nexport interface I18N {\n  dateFormat: string;\n  timezone: string;\n  language: string;\n  currency: Currency;\n}\n\nexport interface Currency {\n  name: string;\n  symbol: string;\n  alpha3: string;\n}\n\nexport interface Payment {\n  undo: Undo;\n  boundary: Boundary;\n  transactions: Transactions;\n  splitInvoice: Transactions;\n  deposit: Deposit;\n  dispense: Deposit;\n}\n\nexport interface Deposit {\n  enabled: boolean;\n  custom: boolean;\n  steps: number[];\n}\n\nexport interface Transactions {\n  enabled: boolean;\n}\n\nexport interface Undo {\n  enabled: boolean;\n  delete: boolean;\n  timeout: string;\n}\n\nexport interface Paypal {\n  enabled: boolean;\n  recipient: string;\n  fee: number;\n  sandbox?: boolean;\n}\n\ninterface User {\n  stalePeriod: string;\n}\n\nexport type SettingsActions = SettingsLoadedAction;\n\nexport function settingsLoaded(settings: Settings): SettingsLoadedAction {\n  return {\n    type: SettingsTypes.SettingsLoaded,\n    payload: settings,\n  };\n}\n\nexport async function startLoadingSettings(dispatch: Dispatch): Promise<void> {\n  const promise = get('settings');\n  const data = await errorHandler<SettingsResponse>(dispatch, {\n    promise,\n    defaultError: 'SETTINGS_LOADED_FAILED',\n  });\n\n  if (data && data.settings) {\n    dispatch(settingsLoaded(data.settings));\n  }\n}\n\nexport const initialState = {\n  article: {\n    enabled: false,\n    autoOpen: false,\n  },\n  common: { idleTimeout: 30000 },\n  paypal: {\n    enabled: true,\n    recipient: 'finanzen@hackerspace-bamberg.de',\n    fee: 0,\n    sandbox: true,\n  },\n  user: { stalePeriod: '10 day' },\n  i18n: {\n    dateFormat: 'YYYY-MM-DD HH:mm:ss',\n    timezone: 'auto',\n    language: 'en',\n    currency: { name: 'Euro', symbol: '\\u20ac', alpha3: 'EUR' },\n  },\n  account: { boundary: { upper: 20000, lower: -20000 } },\n  payment: {\n    undo: { enabled: true, delete: true, timeout: '5 minute' },\n    boundary: { upper: 15000, lower: -2000 },\n    transactions: { enabled: true },\n    splitInvoice: { enabled: true },\n    deposit: {\n      enabled: true,\n      custom: true,\n      steps: [50, 100, 200, 500, 1000],\n    },\n    dispense: {\n      enabled: true,\n      custom: true,\n      steps: [50, 100, 200, 500, 1000],\n    },\n  },\n};\n\nexport function settings(\n  state: Settings = initialState,\n  action: Action\n): Settings {\n  switch (action.type) {\n    case SettingsTypes.SettingsLoaded:\n      return { ...state, ...action.payload };\n    default:\n      return state;\n  }\n}\n\n// Settings selectors\nexport function getSettings(state: AppState): Settings {\n  return state.settings;\n}\n\nexport function getPayment(state: AppState): Payment {\n  return getSettings(state).payment;\n}\n\nexport function getSettingsBalance(state: AppState): number | boolean {\n  return getSettings(state).payment.boundary.upper;\n}\n\nexport function getPayPal(state: AppState): Paypal {\n  return getSettings(state).paypal;\n}\n\nfunction isDepositActive(deposit: Deposit): boolean {\n  return Boolean(deposit.enabled || deposit.custom);\n}\n\nexport function isPaymentEnabled(state: AppState): boolean {\n  const payment = getPayment(state);\n  return isDepositActive(payment.deposit) || isDepositActive(payment.dispense);\n}\n","import { User } from '.';\nimport { get, post, restDelete } from '../../services/api';\nimport { MaybeResponse, errorHandler } from '../../services/error-handler';\nimport { playCashSound } from '../../services/sound';\nimport { Action } from '../action';\nimport { AppState, Dispatch } from '../store';\nimport { Article } from './article';\nimport { userDetailsLoaded } from './user';\nimport { getPayment } from './setting';\n\nexport interface Transaction {\n  id: number;\n  user: User;\n  article?: Article;\n  sender?: User;\n  recipient?: User;\n  comment?: string;\n  amount: number;\n  created: string;\n  isDeleted: boolean;\n  isDeletable: boolean;\n}\n\nexport interface TransactionsResponse extends MaybeResponse {\n  count?: number;\n  transactions: Transaction[];\n}\n\nexport interface TransactionResponse extends MaybeResponse {\n  transaction: Transaction;\n}\n\nexport enum TransactionTypes {\n  StartLoadingTransactions = 'START_LOADING_TRANSACTIONS',\n  TransactionsLoaded = 'TRANSACTIONS_LOADED',\n}\n\nexport interface TransactionsLoadedAction {\n  type: TransactionTypes.TransactionsLoaded;\n  payload: Transaction[];\n}\n\nexport function transactionsLoaded(\n  payload: Transaction[]\n): TransactionsLoadedAction {\n  return {\n    type: TransactionTypes.TransactionsLoaded,\n    payload,\n  };\n}\n\nexport type TransactionActions = TransactionsLoadedAction;\n\nexport async function startLoadingTransactions(\n  dispatch: Dispatch,\n  userId: string,\n  offset?: number,\n  limit?: number\n): Promise<TransactionsResponse | undefined> {\n  const params =\n    offset !== undefined && limit !== undefined\n      ? `?offset=${offset}&limit=${limit}`\n      : '?offset=0&limit=5';\n  const promise = get(`user/${userId}/transaction${params}`);\n  const data = await errorHandler<TransactionsResponse>(dispatch, {\n    promise,\n    defaultError: 'USER_TRANSACTIONS_LOADING_ERROR',\n  });\n  if (data && data.transactions) {\n    dispatch(transactionsLoaded(data.transactions));\n    return data;\n  }\n  return undefined;\n}\n\nexport interface CreateTransactionParams {\n  amount?: number;\n  articleId?: number;\n  recipientId?: string;\n  comment?: string;\n}\nexport async function startCreatingTransaction(\n  dispatch: Dispatch,\n  userId: string,\n  params: CreateTransactionParams\n): Promise<Transaction | undefined> {\n  playCashSound(params);\n  const promise = post(`user/${userId}/transaction`, params);\n  const data = await errorHandler<TransactionResponse>(dispatch, {\n    promise,\n    defaultError: 'USER_TRANSACTION_CREATION_ERROR',\n  });\n  if (data && data.transaction) {\n    dispatch(userDetailsLoaded(data.transaction.user));\n    dispatch(transactionsLoaded([data.transaction]));\n    return data.transaction;\n  }\n  return undefined;\n}\nexport type StartCreatingTransaction = typeof startCreatingTransaction;\n\nexport async function startDeletingTransaction(\n  dispatch: Dispatch,\n  userId: string,\n  transactionId: number\n): Promise<void> {\n  const promise = restDelete(`user/${userId}/transaction/${transactionId}`);\n  const data = await errorHandler<TransactionResponse>(dispatch, {\n    promise,\n    defaultError: 'USER_TRANSACTION_DELETION_ERROR',\n  });\n  if (data && data.transaction) {\n    dispatch(userDetailsLoaded(data.transaction.user));\n    dispatch(transactionsLoaded([data.transaction]));\n  }\n}\n\ninterface TransactionState {\n  [key: number]: Transaction;\n}\n\nexport function transaction(\n  state: TransactionState = {},\n  action: Action\n): TransactionState {\n  switch (action.type) {\n    case TransactionTypes.TransactionsLoaded:\n      return action.payload.reduce((nextState, transaction) => {\n        return { ...nextState, [transaction.id]: transaction };\n      }, state);\n    default:\n      return state;\n  }\n}\n\nexport function getTransactionState(state: AppState): TransactionState {\n  return state.transaction;\n}\n\nexport function getTransaction(\n  state: AppState,\n  id: number\n): Transaction | undefined {\n  return getTransactionState(state)[id];\n}\n\nexport function isTransactionDeletable(state: AppState, id: number): boolean {\n  const payment = getPayment(state);\n  if (!payment.undo.enabled) {\n    return false;\n  }\n\n  const transaction = getTransaction(state, id);\n  if (transaction) {\n    return transaction.isDeletable;\n  }\n\n  return false;\n}\n","import { Action } from '../action';\nimport { AppState } from '../store';\n\nexport enum LoaderTypes {\n  SetLoader = 'SET_LOADER',\n  GlobalLoader = 'GLOBAL_LOADER',\n}\n\nexport interface SetLoader {\n  type: LoaderTypes.SetLoader;\n  payload: Loader;\n}\n\nexport function setLoader(payload: Loader): SetLoader {\n  return {\n    type: LoaderTypes.SetLoader,\n    payload,\n  };\n}\n\nexport function setGlobalLoader(payload: boolean): SetLoader {\n  return setLoader({ [LoaderTypes.GlobalLoader]: payload });\n}\n\nexport type LoaderActions = SetLoader;\n\ninterface Loader {\n  [key: string]: boolean;\n}\n\nconst initialState: Loader = {};\n\nexport function loader(state: Loader = initialState, action: Action): Loader {\n  switch (action.type) {\n    case LoaderTypes.SetLoader:\n      return { ...state, ...action.payload };\n    default:\n      return state;\n  }\n}\n\nexport function getLoader(state: AppState): Loader {\n  return state.loader;\n}\n\nexport function getGlobalLoader(state: AppState): boolean {\n  const loader = getLoader(state);\n\n  return loader[LoaderTypes.GlobalLoader]\n    ? loader[LoaderTypes.GlobalLoader]\n    : false;\n}\n","import { Howl } from 'howler';\nimport { CreateTransactionParams } from '../store/reducers';\n\nconst dispense = new Howl({\n  src: ['ka-ching.wav'],\n});\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function playCashSound(_params?: CreateTransactionParams): void {\n  dispense.play();\n}\n","import { Action } from '../action';\nimport { AppState } from '../store';\n\nexport enum ErrorTypes {\n  SetError = 'SET_ERROR',\n  GlobalError = 'GLOBAL_ERROR',\n}\n\nexport interface SetError {\n  type: ErrorTypes.SetError;\n  payload: Error;\n}\n\nexport function setError(payload: Error): SetError {\n  return {\n    type: ErrorTypes.SetError,\n    payload,\n  };\n}\n\nexport function setGlobalError(payload: string): SetError {\n  return setError({ [ErrorTypes.GlobalError]: payload });\n}\n\nexport type ErrorActions = SetError;\n\ninterface Error {\n  [key: string]: string;\n}\n\nconst initialState: Error = {};\n\nexport function error(state: Error = initialState, action: Action): Error {\n  switch (action.type) {\n    case ErrorTypes.SetError:\n      return { ...state, ...action.payload };\n    default:\n      return state;\n  }\n}\n\nexport function getError(state: AppState): Error {\n  return state.error;\n}\n\nexport function getGlobalError(state: AppState): string {\n  const error = getError(state);\n\n  return error[ErrorTypes.GlobalError] ? error[ErrorTypes.GlobalError] : '';\n}\n","export * from './article';\nexport * from './user';\nexport * from './setting';\nexport * from './transaction';\nexport * from './loader';\nexport * from './error';\nexport * from './search';\n","import * as React from 'react';\nimport { useSettings } from '../../store';\nimport { withRouter } from 'react-router';\nimport { RouteComponentProps } from 'react-router-dom';\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nlet timerId: any = 0;\n\nexport function useIdleTimer(onTimeOut: () => void) {\n  const settings = useSettings();\n\n  const resetTimer = () => {\n    clearTimeout(timerId);\n    timerId = setTimeout(onTimeOut, settings.common.idleTimeout);\n  };\n\n  React.useEffect(() => {\n    resetTimer();\n    document.addEventListener('scroll', resetTimer);\n    document.addEventListener('click', resetTimer);\n    document.addEventListener('touch', resetTimer);\n    document.addEventListener('keyup', resetTimer);\n    return () => {\n      document.removeEventListener('scroll', resetTimer);\n      document.removeEventListener('click', resetTimer);\n      document.removeEventListener('touch', resetTimer);\n      document.removeEventListener('keyup', resetTimer);\n      clearTimeout(timerId);\n    };\n  }, []);\n}\n\nexport const WrappedIdleTimer = React.memo(\n  withRouter((props: RouteComponentProps) => {\n    useIdleTimer(() => props.history.push('/'));\n    return null;\n  })\n);\n","import React from 'react';\n\ninterface State {\n  barcode: string;\n  maybeBarcode: string;\n  timeout?: NodeJS.Timer | number;\n}\n\ninterface Props {\n  render?(value: string): JSX.Element;\n  onChange?(value: string): void;\n}\n\nexport class Scanner extends React.Component<Props, State> {\n  public state = {\n    barcode: '',\n    maybeBarcode: '',\n    timeout: undefined,\n  };\n  public inputRef = React.createRef<HTMLInputElement>();\n\n  public componentDidMount(): void {\n    document.addEventListener('keyup', this.detection);\n  }\n\n  public componentWillUnmount(): void {\n    document.removeEventListener('keyup', this.detection);\n  }\n\n  public detection = (event: KeyboardEvent): void => {\n    const key = event.key;\n\n    if (this.inputRef.current && this.state.maybeBarcode.length > 5) {\n      this.inputRef.current.focus();\n    }\n\n    clearTimeout(this.state.timeout);\n\n    if (key === 'Enter' && this.state.maybeBarcode.length > 6) {\n      this.setState(state => ({\n        barcode: state.maybeBarcode,\n        maybeBarcode: '',\n      }));\n      if (this.props.onChange) {\n        this.props.onChange(this.state.barcode);\n      }\n    } else if (/[a-zA-Z0-9]/i.test(key)) {\n      this.setState(state => ({\n        barcode: '',\n        maybeBarcode: state.maybeBarcode + key,\n      }));\n\n      const id = setTimeout(() => {\n        this.setState({ maybeBarcode: '' });\n      }, 200);\n\n      this.setState({ timeout: id });\n    }\n  };\n\n  public render(): JSX.Element | null {\n    if (!this.props.render) {\n      return (\n        <input\n          style={{ opacity: 0 }}\n          value=\"\"\n          onChange={() => {}}\n          ref={this.inputRef}\n          type=\"text\"\n          hidden\n          tabIndex={-1}\n        />\n      );\n    }\n    return (\n      <>\n        <input\n          style={{ opacity: 0 }}\n          value=\"\"\n          onChange={() => {}}\n          ref={this.inputRef}\n          type=\"text\"\n          hidden\n          tabIndex={-1}\n        />\n        {this.props.render(this.state.barcode)}\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport { useSettings, useUserBalance } from '../../store';\n\nexport function useArticleValidator(\n  value: number,\n  userId: string = ''\n): boolean {\n  const settings = useSettings();\n  const userBalance = useUserBalance(userId);\n  const boundary = settings.payment.boundary;\n\n  if (userId) {\n    const newValue =\n      (typeof userBalance === 'boolean' ? 0 : userBalance) - value;\n    return boundary.lower < newValue;\n  } else {\n    return value > 0 && value * -1 > boundary.lower;\n  }\n}\n\ninterface Props {\n  value: number;\n  userId?: string;\n  render(isValid: boolean): React.ReactNode;\n}\nexport const ArticleValidator = (props: Props) => {\n  const isValid = useArticleValidator(props.value, props.userId);\n  return <>{props.render(isValid)}</>;\n};\n","import React from 'react';\n\nexport const Trash = () => {\n  return (\n    <svg\n      style={{ width: '1rem', height: '1rem' }}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 448 512\"\n    >\n      <path d=\"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z\" />\n    </svg>\n  );\n};\n","import {\n  AcceptIcon,\n  AddIcon,\n  Block,\n  Card,\n  ClickOutside,\n  Column,\n  Ellipsis,\n  Flex,\n  HoverCard,\n  Input,\n  PrimaryButton,\n  CancelButton,\n  styled,\n} from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { useDispatch } from 'redux-react-hook';\nimport { useToggle } from '../../hooks/use-toggle';\nimport { useArticle } from '../../store';\nimport {\n  Article,\n  startAddArticle,\n  startDeletingArticle,\n} from '../../store/reducers';\nimport { Scanner } from '../common/scanner';\nimport { Currency, CurrencyInput } from '../currency';\nimport { useArticleValidator } from './validator';\nimport { Trash } from '../ui/icons/trash';\n\ninterface ButtonProps {\n  isVisible: boolean;\n  idArticle?: number;\n  onClick(): void;\n}\n\nconst ToggleArticleButton: React.FC<ButtonProps> = props => {\n  if (props.isVisible) {\n    return (\n      <CancelButton\n        Icon={props.idArticle ? Trash : undefined}\n        onClick={props.onClick}\n      ></CancelButton>\n    );\n  }\n\n  if (props.idArticle) {\n    return <Block width=\"2rem\" />;\n  }\n\n  return (\n    <PrimaryButton onClick={props.onClick} isRound>\n      <AddIcon />\n    </PrimaryButton>\n  );\n};\n\nconst ArticleFormGrid = styled(Flex)({\n  '@media(max-width: 30em)': {\n    display: 'block',\n    textAlign: 'left',\n    div: {\n      width: '100%!important',\n    },\n\n    input: {\n      margin: '0 0 1rem 0',\n    },\n  },\n  fontSize: '0.8rem',\n  input: {\n    marginRight: '1rem',\n  },\n  label: {\n    marginRight: '0.5rem',\n  },\n});\n\nconst ArticleGrid = styled('div')({\n  cursor: 'pointer',\n  display: 'grid',\n  gridGap: '1rem',\n  '@media screen and (min-width: 500px)': {\n    gridTemplateColumns: '1fr 9rem 5rem',\n  },\n});\n\nconst TextRight = styled('div')({\n  '@media screen and (min-width: 500px)': {\n    textAlign: 'right',\n  },\n});\n\ninterface Props {\n  articleId?: number;\n  onCreated(): void;\n}\n\nconst initialParams = {\n  name: '',\n  barcode: '',\n  amount: 0,\n  isActive: true,\n  precursor: null,\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst resetArticle = (article: Article | undefined, setParams: any) => {\n  if (article) {\n    setParams({\n      amount: article.amount,\n      barcode: article.barcode,\n      name: article.name,\n      precursor: article,\n      isActive: article.isActive,\n    });\n  } else {\n    setParams(initialParams);\n  }\n};\n\nexport const ArticleForm: React.FC<Props> = props => {\n  const { toggle, updateToggle, setToggle } = useToggle(false);\n  const [params, setParams] = React.useState(initialParams);\n  const isValidArticle = useArticleValidator(params.amount);\n\n  const dispatch = useDispatch();\n  const article = useArticle(props.articleId);\n\n  React.useEffect(() => {\n    resetArticle(article, setParams);\n  }, [article]);\n\n  const deleteArticle = () => {\n    if (article) {\n      startDeletingArticle(dispatch, article.id);\n    }\n  };\n\n  const handleClickOutSide = () => {\n    resetArticle(article, setParams);\n    setToggle(false);\n  };\n\n  const handleToggleClick = () => {\n    if (toggle) {\n      deleteArticle();\n      setToggle(false);\n    } else {\n      setToggle(true);\n    }\n  };\n\n  const submit = async (e: React.FormEvent, isValid: boolean) => {\n    e.preventDefault();\n    if (!isValid) {\n      return;\n    }\n\n    const maybeArticle = await startAddArticle(dispatch, params);\n\n    if (maybeArticle) {\n      updateToggle();\n      props.onCreated();\n    }\n  };\n\n  return (\n    <ClickOutside onClick={handleClickOutSide}>\n      <Flex alignItems=\"center\" margin=\"0 0 0.5rem\">\n        <ToggleArticleButton\n          idArticle={props.articleId}\n          isVisible={toggle}\n          onClick={handleToggleClick}\n        />\n        <Column margin=\"0 0 0 1rem\" flex=\"1\">\n          {toggle && (\n            <Card padding=\"0.5rem\" level={'level3'}>\n              <ArticleFormGrid\n                justifyContent=\"space-between\"\n                alignItems=\"center\"\n              >\n                <label htmlFor=\"article_add_form_label\">\n                  <FormattedMessage id=\"ARTICLE_ADD_FORM_NAME_LABEL\" />\n                </label>\n                <Input\n                  id=\"article_add_form_label\"\n                  value={params.name}\n                  onChange={e => setParams({ ...params, name: e.target.value })}\n                  type=\"text\"\n                  required\n                />\n                <Scanner\n                  onChange={barcode =>\n                    setParams({\n                      ...params,\n                      barcode,\n                    })\n                  }\n                />\n                <label htmlFor=\"article_add_barcode_label\">\n                  <FormattedMessage id=\"ARTICLE_ADD_FORM_BARCODE_LABEL\" />\n                </label>\n                <Input\n                  id=\"article_add_barcode_label\"\n                  value={params.barcode}\n                  onChange={e =>\n                    setParams({ ...params, barcode: e.target.value })\n                  }\n                  type=\"text\"\n                  required\n                />\n                <label htmlFor=\"article_add_amount_label\">\n                  <FormattedMessage id=\"ARTICLE_ADD_FORM_AMOUNT_LABEL\" />\n                </label>\n                <form onSubmit={e => submit(e, isValidArticle)}>\n                  <CurrencyInput\n                    id=\"article_add_amount_label\"\n                    noNegative\n                    value={params.amount}\n                    onChange={amount => setParams({ ...params, amount })}\n                  />\n                </form>\n                <PrimaryButton\n                  isRound\n                  disabled={!isValidArticle}\n                  onClick={(e: React.FormEvent) => submit(e, isValidArticle)}\n                >\n                  <AcceptIcon />\n                </PrimaryButton>\n              </ArticleFormGrid>\n            </Card>\n          )}\n          {!toggle && props.articleId && (\n            <HoverCard padding=\"0.5rem\" onClick={updateToggle}>\n              <ArticleGrid>\n                <Column>{params.name}</Column>\n                <TextRight>\n                  <Ellipsis>{params.barcode}</Ellipsis>\n                </TextRight>\n                <TextRight>\n                  <Currency value={params.amount} />\n                </TextRight>\n              </ArticleGrid>\n            </HoverCard>\n          )}\n          {!toggle && !props.articleId && props.children}\n        </Column>\n      </Flex>\n    </ClickOutside>\n  );\n};\n","import { useState } from 'react';\n\nexport function useToggle(\n  initialState: boolean = false\n): {\n  toggle: boolean;\n  updateToggle(): void;\n  setToggle(toggle: boolean): void;\n} {\n  const [toggle, setToggle] = useState(initialState);\n\n  const updateToggle = () => setToggle(!toggle);\n\n  return { toggle, updateToggle, setToggle };\n}\n","import { Card } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { ArticleForm } from './article-form';\n\nexport function ArticleEditFormView({\n  match,\n  history,\n}: RouteComponentProps<{ id: string }>): JSX.Element {\n  return (\n    <Card>\n      <ArticleForm\n        onCreated={history.goBack}\n        articleId={Number(match.params.id)}\n      />\n    </Card>\n  );\n}\n","import React from 'react';\nimport { useLocalStorage } from '../../hooks/use-storage';\nimport { TextButton, SearchMinus, SearchPlus, Icon } from 'bricks-of-sand';\n\nexport const useScalingState = () => {\n  const [scaling, setScaling] = useLocalStorage('scaling', 0);\n  const increment = () => {\n    setScaling(scaling + 1);\n    window.location.reload();\n  };\n  const decrement = () => {\n    setScaling(scaling - 1);\n    window.location.reload();\n  };\n\n  return {\n    scaling,\n    increment,\n    decrement,\n  };\n};\n\nexport const ScalingButtons = () => {\n  const { increment, decrement } = useScalingState();\n\n  return (\n    <>\n      <TextButton onClick={decrement}>\n        <Icon width=\"1rem\" height=\"1rem\">\n          <SearchMinus />\n        </Icon>\n      </TextButton>\n\n      <TextButton onClick={increment}>\n        <Icon width=\"1rem\" height=\"1rem\">\n          <SearchPlus />\n        </Icon>\n      </TextButton>\n    </>\n  );\n};\n","import { useState } from 'react';\n\nexport function useLocalStorage<T>(\n  key: string,\n  initialValue: T\n): [T, (map: T) => void] {\n  const [item, setInnerValue] = useState(() => {\n    try {\n      return window.localStorage.getItem(key)\n        ? JSON.parse(window.localStorage.getItem(key) || '')\n        : initialValue;\n    } catch (error) {\n      return initialValue;\n    }\n  });\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const setValue = (value: any) => {\n    setInnerValue(value);\n    window.localStorage.setItem(key, JSON.stringify(value));\n  };\n\n  return [item, setValue];\n}\n","import React from 'react';\n\nimport styles from './scroll-container.module.css';\n\nexport const ScrollContainer: React.FC<{ style?: React.CSSProperties }> = ({\n  children,\n  style,\n}) => {\n  return (\n    <div style={style} className={styles.container}>\n      {children}\n    </div>\n  );\n};\n","import { Flex, Tab, ThemeSwitcher, styled } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { ScalingButtons } from '../settings/scaling-buttons';\nimport { ScrollContainer } from './scroll-container/scroll-container';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst Tabs: any = Tab(NavLink);\n\nconst IconNav = styled('div')({\n  display: 'flex',\n  alignContent: 'center',\n  justifyContent: 'center',\n  button: {\n    marginRight: '1rem',\n  },\n});\n\nexport interface NavTabMenusProps {\n  breakpoint: number;\n  label: React.ReactNode;\n  tabs: { message: JSX.Element; to: string }[];\n  margin?: string;\n}\n\nexport function NavTabMenus({ tabs, margin }: NavTabMenusProps): JSX.Element {\n  return (\n    <Flex justifyContent=\"space-between\" margin={margin}>\n      <ScrollContainer style={{ margin: '0 2rem 0 0' }}>\n        {tabs.map(tab => (\n          <Tabs\n            margin=\"0 1.5rem 0 0\"\n            key={tab.to}\n            activeClassName=\"active\"\n            to={tab.to}\n          >\n            {tab.message}\n          </Tabs>\n        ))}\n      </ScrollContainer>\n      <IconNav>\n        <ThemeSwitcher height=\"1rem\" />\n        <ScalingButtons />\n      </IconNav>\n    </Flex>\n  );\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useState, useEffect } from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { Input } from 'bricks-of-sand';\n\nexport const useInfiniteScrolling = (\n  items: any[],\n  PAGE_SIZE: number,\n  noScrollBarPageOffset = 2\n) => {\n  const [page, setPage] = useState(1);\n  const nextPage = () => {\n    setPage(page + 1);\n  };\n  const pageItems = items.slice(0, PAGE_SIZE * page);\n\n  useEffect(() => {\n    const hasVScroll = document.body.scrollHeight > document.body.clientHeight;\n    const shouldLoadMoreItemsOnStart =\n      page === 1 && !hasVScroll && pageItems.length < items.length;\n\n    if (shouldLoadMoreItemsOnStart) {\n      setPage(page + noScrollBarPageOffset);\n    }\n  }, [items]);\n\n  return {\n    items: pageItems,\n    dataLength: pageItems.length,\n    next: nextPage,\n    hasMore: true,\n    loader: null,\n    page,\n  };\n};\n\ntype SearchListComponent = React.FC<{\n  items: any[];\n  pageSize: number;\n  renderItem: any;\n}>;\n\nexport const SearchList: SearchListComponent = ({\n  items,\n  pageSize,\n  renderItem,\n}) => {\n  const [filter, updateFilter] = useState('');\n  const [filteredItems, setFilteredItems] = useState(items);\n\n  useEffect(() => {\n    setFilteredItems(\n      filter\n        ? items.filter(item =>\n            item.name.toLowerCase().includes(filter.toLowerCase())\n          )\n        : items\n    );\n  }, [filter, items]);\n\n  return (\n    <div>\n      <div style={{ margin: '1rem 0' }}>\n        <Input\n          placeholder=\"search\"\n          value={filter}\n          onChange={e => updateFilter(e.target.value)}\n        />\n      </div>\n      <InfiniteList\n        items={filteredItems}\n        pageSize={pageSize}\n        renderItem={renderItem}\n      />\n    </div>\n  );\n};\n\nexport const InfiniteList: SearchListComponent = ({\n  items,\n  pageSize,\n  renderItem,\n}) => {\n  const infiniteProps = useInfiniteScrolling(items, pageSize);\n\n  return (\n    <InfiniteScroll {...infiniteProps}>\n      {infiniteProps.items.map(renderItem)}\n    </InfiniteScroll>\n  );\n};\n","import { Block } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { useDispatch } from 'redux-react-hook';\nimport { useActiveArticles } from '../../store';\nimport { startLoadingArticles, Article } from '../../store/reducers';\nimport { NavTabMenus } from '../common/nav-tab-menu';\nimport { ArticleForm } from './article-form';\nimport { InfiniteList } from '../common/search-list/search-list';\n\nexport const ArticleList: React.FC<{ isActive: boolean }> = ({ isActive }) => {\n  const articles = useActiveArticles(isActive);\n  const dispatch = useDispatch();\n\n  React.useEffect(() => {\n    startLoadingArticles(dispatch, isActive);\n  }, [dispatch]);\n\n  return (\n    <Block margin=\"1.5rem 1rem\">\n      <ArticleForm onCreated={() => ''}>\n        <NavTabMenus\n          margin=\"0.5rem 0\"\n          breakpoint={0}\n          label={<FormattedMessage id=\"ARTICLE_HEADLINE\" />}\n          tabs={[\n            {\n              to: '/articles/active',\n              message: <FormattedMessage id=\"ARTICLE_ACTIVE_HEADLINE\" />,\n            },\n            {\n              to: '/articles/inactive',\n              message: <FormattedMessage id=\"ARTICLE_INACTIVE_HEADLINE\" />,\n            },\n          ]}\n        />\n      </ArticleForm>\n      <InfiniteList\n        items={articles}\n        renderItem={(item: Article) => (\n          <ArticleForm onCreated={() => ''} articleId={item.id} key={item.id}>\n            {item.name}\n          </ArticleForm>\n        )}\n        pageSize={10}\n      />\n    </Block>\n  );\n};\n","import * as React from 'react';\nimport { Route, Switch, Redirect } from 'react-router';\nimport { WrappedIdleTimer } from '../common/idle-timer';\nimport { ArticleEditFormView } from './article-edit-form-view';\nimport { ArticleList } from './article-list';\n\nexport function ArticleRouter(): JSX.Element {\n  return (\n    <>\n      <WrappedIdleTimer />\n      <Switch>\n        <Route\n          path=\"/articles/active\"\n          exact={true}\n          component={() => <ArticleList isActive={true} />}\n        />\n        <Route\n          path=\"/articles/inactive\"\n          exact={true}\n          component={() => <ArticleList isActive={false} />}\n        />\n        <Route\n          path=\"/articles/add\"\n          exact={true}\n          component={ArticleEditFormView}\n        />\n        <Route\n          path=\"/articles/:id/edit\"\n          exact={true}\n          component={ArticleEditFormView}\n        />\n        <Redirect from=\"/articles\" to=\"/articles/active\" />\n      </Switch>\n    </>\n  );\n}\n","export const en = {\n  BALANCE_DISPENSE: 'dispense',\n  BALANCE_PLACEHOLDER: 'CUSTOM AMOUNT',\n  BALANCE_DEPOSIT: 'deposit',\n  BALANCE_TITLE: 'Balance',\n  ARTICLE_HEADLINE: 'Articles',\n  ARTICLE_LINK: 'Article List',\n  ARTICLE_ADD_LINK: 'add new articles',\n  ARTICLE_ADD_FORM_NAME_LABEL: 'Name:',\n  ARTICLE_ADD_FORM_BARCODE_LABEL: 'Barcode:',\n  ARTICLE_ADD_FORM_AMOUNT_LABEL: 'Price:',\n  ARTICLE_LOADING_BY_BARCODE: 'fetching article by barcode',\n  ARTICLE_FETCHED_BY_BARCODE: 'you just scanned:',\n  ARTICLES_COULD_NOT_BE_LOADED:\n    'Could not load Articles maybe check your internet connection',\n  ARTICLE_COULD_NOT_BE_CREATED:\n    'Could not create the article maybe check your internet connection',\n  ARTICLE_COULD_NOT_BE_LOADED_BY_BARCODE:\n    'Could not load the article by barcode',\n  TALLY_HEADER: 'Strichliste',\n  USERS_LOADING_FAILED:\n    'Oops could not load users :-( Maybe check your internet connection and try it again',\n  USERS_CREATION_FAILED: 'Oops could not create this user',\n  USERS_CREATION_FAILED_USER_EXIST: 'This user already exists',\n  USER_EDIT_USER_FAILED:\n    'Could not save the user :-(. Check your input or your internet connection',\n  USER_SEARCH_LINK: 'Find users',\n  USER_ARTICLE_LINK: 'Buy article',\n  USER_SEARCH_HEADLINE: 'Find users',\n  USER_ACTIVE: 'Active users',\n  USER_INACTIVE: 'Inactive users',\n  USER_ACTIVE_LINK: 'active users',\n  USER_INACTIVE_LINK: 'inactive users',\n  USER_TRANSACTIONS: 'Transactions',\n  USER_TRANSACTIONS_LINK: 'ALL TRANSACTIONS',\n  USER_TRANSACTIONS_LOADING_ERROR: 'Could not load transactions',\n  USER_TRANSACTION_CREATION_ERROR: 'Could not create transaction',\n  USER_TRANSACTION_DELETION_ERROR: 'Could not undo transaction',\n  USER_TRANSACTIONS_SENDER: 'sender',\n  USER_TRANSACTIONS_TABLE_ARTICLE: 'article',\n  USER_TRANSACTIONS_TABLE_SENDER: 'sender',\n  USER_TRANSACTIONS_TABLE_RECIPIENT: 'recipient',\n  USER_TRANSACTIONS_TABLE_COMMENT: 'comment',\n  USER_TRANSACTIONS_TABLE_AMOUNT: 'amount',\n  USER_TRANSACTIONS_TABLE_CREATED: 'created',\n  USER_TRANSACTIONS_TABLE_LOAD_NEXT_ROWS: 'more',\n  USER_TRANSACTIONS_RECIPIENT: 'recipient',\n  USER_TRANSACTION_CREATE: 'Send money to a friend',\n  USER_TRANSACTION_CREATE_SUBMIT_TITLE:\n    'Submit to send this amount to a friend',\n  USER_TRANSACTION_CREATE_LINK: 'Send money',\n  USER_TRANSACTION_CREATE_CUSTOM_HEADLINE: 'Custom transaction',\n  USER_TRANSACTION_CREATE_CUSTOM_DEPOSIT_BUTTON: 'Charge wallet',\n  USER_TRANSACTION_CREATE_CUSTOM_DISPENSE_BUTTON: 'Pay purchase',\n  USER_TRANSACTION_FROM_AMOUNT_LABEL: 'Amount',\n  USER_TRANSACTION_UNDO: 'undo',\n  USER_SELECTION_LIST_LABEL: 'Select a user by name',\n  USER_CREATE_HEADLINE: 'Create new user',\n  USER_CREATE_TRIGGER: 'Create user',\n  USER_CREATE_NAME_LABEL: 'add new user',\n  USER_EDIT_LINK: 'edit user',\n  USER_EDIT_HEADLINE: 'Edit user',\n  USER_EDIT_TRIGGER: 'save changes',\n  USER_EDIT_NAME_LABEL: 'name',\n  USER_EDIT_MAIL_LABEL: 'e-mail',\n  USER_EDIT_ACTIVE_LABEL: 'User is inactive',\n  USER_EDIT_ACTIVE_WARNING: 'you can not enable a disabled user. So take care',\n  PAYMENT_DEPOSIT_LABEL: 'Charge your wallet',\n  PAYMENT_DISPENSE_LABEL: 'What you have to pay',\n  BACK_BUTTON: 'back',\n  SETTINGS_LOADED_FAILED:\n    'Could not load settings, falling back to default settings',\n  PAGER_PREV: 'prev',\n  PAGER_NEXT: 'next',\n  SEARCH: 'Search',\n  CREATE_USER_TO_USER_TRANSACTION_SUCCESS: 'You sent User',\n  CREATE_USER_TO_USER_TRANSACTION_USER: 'Username',\n  CREATE_USER_TO_USER_TRANSACTION_COMMENT: 'Add notes to your transaction',\n  TRANSACTION_EMPTY_STATE: 'You have no transactions yet :,(',\n  METRICS_HEADLINE: 'Metrics',\n  ARTICLE_ACTIVE_HEADLINE: 'Active Articles',\n  ARTICLE_INACTIVE_HEADLINE: 'Inactive Articles',\n  SPLIT_INVOICE_LINK: 'Split Invoice',\n  SPLIT_INVOICE_HEADLINE: 'Split Invoice',\n  SPLIT_INVOICE_SUBMIT: 'submit the split invoice',\n};\n","import { Card, theme } from 'bricks-of-sand';\nimport * as React from 'react';\n\ninterface State {\n  isVisible: boolean;\n  timeoutId: number | NodeJS.Timer;\n}\n\ninterface Props {\n  type?: 'error';\n  fadeOutSeconds: number;\n  onFadeOut?(): void;\n}\n\nexport class Toast extends React.Component<Props, State> {\n  public state = { isVisible: true, timeoutId: 0 };\n\n  public componentDidMount(): void {\n    const timeoutId = setTimeout(() => {\n      this.setState({ isVisible: false });\n      if (this.props.onFadeOut) {\n        this.props.onFadeOut();\n      }\n    }, this.props.fadeOutSeconds * 1000);\n    this.setState({ timeoutId });\n  }\n\n  public componentWillUnmount(): void {\n    clearTimeout(this.state.timeoutId);\n  }\n\n  public render(): JSX.Element | null {\n    const cardProps =\n      this.props.type === 'error'\n        ? {\n            color: theme.white,\n            background: theme.red,\n          }\n        : {};\n    if (!this.state.isVisible) {\n      return null;\n    }\n\n    return <Card {...cardProps}>{this.props.children}</Card>;\n  }\n}\n","import { FixedContainer } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { useGlobalError } from '../../store';\nimport { Toast } from './toast';\n\ninterface OwnProps {}\n\ninterface StateProps {\n  id?: string;\n}\n\ninterface ActionProps {}\n\nexport type ErrorMessageProps = ActionProps & StateProps & OwnProps;\n\nexport function ErrorMessage() {\n  const id = useGlobalError();\n\n  if (!id) {\n    return null;\n  }\n\n  return (\n    <FixedContainer bottom={0}>\n      <Toast type=\"error\" fadeOutSeconds={5}>\n        <FormattedMessage id={id} />\n      </Toast>\n    </FixedContainer>\n  );\n}\n","import * as React from 'react';\n\nexport function Logo(props: {\n  width?: string;\n  height?: string;\n  style?: React.CSSProperties;\n}): JSX.Element {\n  return (\n    <svg\n      style={props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width={props.width}\n      height={props.height}\n      viewBox=\"0 0 25 21\"\n    >\n      <path d=\"M6.88538031,12.3145836 C7.5626171,11.9709698 8.38096193,11.5620105 9.39258852,11.0611807 C9.32139178,8.04799842 8.96035589,4.35591876 9.20846395,1.1105511 C9.20846395,0.603565145 9.40438871,0.0575802729 9.79623824,0.0575802729 C10.5407524,0.0575802729 11.4028213,0.525567306 11.4028213,0.876557581 C11.4028213,1.53953921 11.2068966,3.17749383 11.2068966,6.72639549 C11.2068966,8.29267717 11.2455408,9.29303652 11.2938192,10.1234363 C11.8127299,9.86823589 12.370273,9.59450422 12.9702194,9.30032417 C13.2832652,9.1459353 13.5852957,8.99695347 13.8767341,8.85316284 C13.8542036,5.84480386 13.8401966,2.65346644 13.9106583,1.22754786 C13.9106583,0.720561903 14.2633229,0.291573789 14.6551724,0.291573789 C15.3996865,0.291573789 16.2225705,0.759560822 16.2225705,1.1105511 C16.2225705,3.19885916 15.9143186,4.48184751 15.9091565,7.84960276 C16.7571551,7.43042436 17.4865063,7.06912465 18.1158484,6.75619478 C18.1803757,4.96372762 18.2465501,3.13371976 18.299373,1.18854894 C18.299373,-0.839394874 20.3369906,-0.0594164854 20.3369906,1.9295284 C20.3369906,2.72599699 20.3011752,4.25913555 20.2690824,5.67635654 C21.9753115,4.80813626 22.2054762,4.63945352 22.6489028,4.30846249 C23.1583072,3.9184733 23.354232,3.64548086 23.6285266,3.64548086 C24.5689655,3.64548086 25,4.58145493 25,5.20543764 C25,5.63442575 24.7257053,5.86841927 24.177116,6.18041062 C23.354232,6.68739657 22.3746082,7.07738577 21.7868339,7.11638469 C21.2451687,7.14333937 20.843896,7.27741725 20.2288405,7.59909638 C20.2229811,7.94245807 20.2194357,8.23239326 20.2194357,8.44234795 L20.2194357,18.6210659 C20.2194357,19.2840475 19.200627,20.2200216 18.7304075,20.2200216 C18.0642633,20.2200216 17.8683386,18.075081 17.8683386,17.4900973 C17.8683386,14.421748 17.9458558,11.639953 18.0420208,8.84004395 C17.4602276,9.16993946 16.7621495,9.55803056 15.9090909,10.0131099 C15.9090909,11.4822447 15.9090909,12.9411953 15.9090909,14.2921859 C15.9090909,17.2171048 16.4184953,17.139107 16.4184953,17.607094 C16.4184953,18.0360821 15.6739812,20.2200216 14.8902821,20.2200216 C14.2241379,20.2200216 14.2241379,19.55704 14.2241379,18.8940584 C14.2241379,17.9970832 13.9106583,15.9301405 13.9106583,14.0581923 C13.9106583,13.2698308 13.9033365,12.2239949 13.8941748,11.0613229 C13.3245111,11.3508021 12.7049027,11.6603558 12.0297806,11.9912496 C11.8243374,12.0924403 11.6240533,12.1916218 11.428782,12.2888427 C11.4597153,12.9242271 11.4811912,13.667324 11.4811912,14.6821751 C11.4811912,16.632121 11.4028213,18.7770616 11.4028213,19.1670508 C11.4028213,19.7130357 10.6191223,21 9.9137931,21 C9.2476489,21 9.01253918,20.2590205 8.93416928,19.3230465 C8.93416928,17.38571 9.32398841,15.1089013 9.41202253,13.3147809 C8.41289749,13.8355262 7.58912679,14.286387 6.90461945,14.6793365 L6.93573668,18.5040692 C6.93573668,19.3230465 6.54388715,20.4540151 5.56426332,20.4540151 C5.21159875,20.4540151 5.05485893,20.2980195 4.93730408,18.6600648 C4.87904543,17.8579797 4.84003493,16.9840568 4.81431063,15.9771794 C3.7421623,16.7164427 3.40949868,17.1150509 2.97805643,17.4510983 C1.05799373,19.0110551 0,17.9580843 0,17.4900973 C0,16.4371264 1.21473354,15.6181491 2.62539185,14.721174 C3.38068615,14.2356956 3.902187,13.901147 4.77603017,13.4195384 C4.75567325,10.5885996 4.78056426,6.82926813 4.78056426,1.42254245 C4.78056426,0.603565145 4.78056426,0.0575802729 5.99529781,0.0575802729 C6.54388715,0.0575802729 7.2492163,0.759560822 7.2492163,2.39751544 C7.2492163,3.64548086 6.85736677,7.7403674 6.85736677,8.87133606 L6.88538031,12.3145836 Z\" />\n    </svg>\n  );\n}\n","import * as React from 'react';\n\nexport function SearchIcon({\n  style,\n}: {\n  style: React.CSSProperties;\n}): JSX.Element {\n  return (\n    <svg\n      style={style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"15\"\n      height=\"15\"\n      viewBox=\"0 0 15 15\"\n    >\n      <path d=\"M9.90664671,8.79167096 L11.2684021,9.7684021 L14.5,13 L13,14.5 L9.75326538,11.2532654 L8.79102418,9.90713055 C7.87334026,10.5935176 6.73413965,11 5.5,11 C2.46243388,11 0,8.53756612 0,5.5 C0,2.46243388 2.46243388,0 5.5,0 C8.53756612,0 11,2.46243388 11,5.5 C11,6.73442961 10.5933266,7.87387556 9.90664671,8.79167096 Z M5.5,9.2 C7.54345357,9.2 9.2,7.54345357 9.2,5.5 C9.2,3.45654643 7.54345357,1.8 5.5,1.8 C3.45654643,1.8 1.8,3.45654643 1.8,5.5 C1.8,7.54345357 3.45654643,9.2 5.5,9.2 Z\" />\n    </svg>\n  );\n}\n","import { HeaderNavBar } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { NavLink } from 'react-router-dom';\nimport { Logo } from '../ui/icons/logo';\nimport { ScrollContainer } from './scroll-container/scroll-container';\nimport { useSettings } from '../../store';\nimport { SearchIcon } from '../ui/icons/search';\n\nconst navLinkStyle = { marginRight: '1rem' };\n\nexport function HeaderMenu(): JSX.Element {\n  const payment = useSettings().payment;\n  return (\n    <HeaderNavBar>\n      <ScrollContainer>\n        <NavLink\n          style={{\n            ...navLinkStyle,\n            display: 'flex',\n            alignItems: 'center',\n            alignContent: 'center',\n          }}\n          activeClassName=\"active\"\n          to=\"/user\"\n        >\n          <Logo\n            style={{ margin: '0 0.5rem', width: '1rem', height: '1rem' }}\n            width=\"1rem\"\n            height=\"1rem\"\n          />\n          <FormattedMessage id=\"TALLY_HEADER\" />\n        </NavLink>\n        <NavLink style={navLinkStyle} activeClassName=\"active\" to=\"/articles\">\n          <FormattedMessage id=\"ARTICLE_LINK\" />\n        </NavLink>\n        {payment.splitInvoice.enabled && (\n          <NavLink\n            style={navLinkStyle}\n            activeClassName=\"active\"\n            to=\"/split-invoice\"\n          >\n            <FormattedMessage id=\"SPLIT_INVOICE_LINK\" />\n          </NavLink>\n        )}\n        <NavLink activeClassName=\"active\" to=\"/metrics\">\n          <FormattedMessage id=\"METRICS_LINK\" defaultMessage=\"Metrics\" />\n        </NavLink>\n      </ScrollContainer>\n      <div\n        style={{\n          width: '7rem',\n          minWidth: '7rem',\n          paddingLeft: '0.5rem',\n          paddingRight: '0.5rem',\n          textAlign: 'right',\n        }}\n      >\n        <NavLink\n          style={{\n            display: 'flex',\n            alignItems: 'center',\n            alignContent: 'center',\n            justifyContent: 'flex-end',\n          }}\n          activeClassName=\"active\"\n          to=\"/search-results\"\n        >\n          <FormattedMessage id=\"SEARCH_RESULTS_LINK\" defaultMessage=\"Search\" />\n          <SearchIcon style={{ marginLeft: '0.5rem' }} />\n        </NavLink>\n      </div>\n    </HeaderNavBar>\n  );\n}\n","export const baseCss = (scaling: number) => `\n:root{\n  font-size: ${15 + scaling}px;\n}\n\nlabel {\n  display: block;\n}\n\n@media only screen and (min-width: 40em) {\n  :root{\n    font-size: ${17 + scaling}px;\n  }\n}\n\n@media only screen and (min-width: 100em) {\n  :root{\n    font-size: ${22 + scaling}px;\n  }\n}\n\nbody {\n  font-family: 'Inter';\n}\nh1,h2,h3{\n  text-transform: uppercase;\n  font-family: 'Inter';\n  font-weight: lighter;\n}\n  input {\n    padding: 0.5rem;\n    font-family: 'Inter';\n    width: 100%;\n    border-radius: 2px;\n  }\n  input,button {\n    align-items: center;\n    align-content:center;\n  }\n`;\n\nexport const mobileStyles = `\n  body { user-select: none;}\n`;\n","import * as React from 'react';\n\nexport function GitHubIcon(): JSX.Element {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n    >\n      <path d=\"M7.9995089,0 C3.58207489,0 0,3.6723364 0,8.20321298 C0,11.8267058 2.29195826,14.9008335 5.47133211,15.9859679 C5.87157766,16.0609957 6.01743401,15.8077138 6.01743401,15.5901834 C6.01743401,15.3958159 6.01055862,14.8796847 6.00662983,14.1953703 C3.78146102,14.6908562 3.31197053,13.0956332 3.31197053,13.0956332 C2.9480663,12.1479659 2.42357274,11.8961946 2.42357274,11.8961946 C1.69723757,11.387113 2.47857581,11.3971839 2.47857581,11.3971839 C3.28152241,11.4555948 3.7038674,12.242632 3.7038674,12.242632 C4.41743401,13.4959496 5.57593616,13.1339024 6.03216697,12.9244287 C6.1048496,12.3941983 6.31111111,12.0326547 6.53996317,11.8277128 C4.76365869,11.6207568 2.89600982,10.9168042 2.89600982,7.77369112 C2.89600982,6.87839233 3.20785758,6.14624134 3.71958257,5.57270629 C3.63707796,5.36524672 3.36255371,4.53138013 3.79766728,3.40193401 C3.79766728,3.40193401 4.46949048,3.18138234 5.99779006,4.2428502 C6.63572744,4.06056777 7.32031921,3.96993009 8.0004911,3.9664053 C8.67968079,3.96993009 9.36427256,4.06056777 10.0031921,4.2428502 C11.5305095,3.18138234 12.2008594,3.40193401 12.2008594,3.40193401 C12.6374463,4.53138013 12.362922,5.36524672 12.2804174,5.57270629 C12.7931246,6.14624134 13.103008,6.87839233 13.103008,7.77369112 C13.103008,10.9248609 11.2324125,11.6182391 9.45021486,11.8211668 C9.73750767,12.0744487 9.99337017,12.5749701 9.99337017,13.3403549 C9.99337017,14.4365672 9.98354819,15.3212916 9.98354819,15.5901834 C9.98354819,15.809728 10.1274401,16.0650241 10.5335789,15.9849608 C13.709515,14.8978123 16,11.8256987 16,8.20321298 C16,3.6723364 12.4179251,0 7.9995089,0\" />\n    </svg>\n  );\n}\n","import { Footer } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { GitHubIcon } from '../ui/icons/git-hub';\n\nexport function MainFooter(): JSX.Element {\n  return (\n    <Footer>\n      <div>\n        strichliste-web (MIT License, by{' '}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/schinken\"\n        >\n          schinken\n        </a>{' '}\n        and{' '}\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/sanderdrummer\"\n        >\n          sanderdrummer\n        </a>\n        )\n      </div>\n      <div>\n        <a\n          rel=\"noopener noreferrer\"\n          target=\"_blank\"\n          href=\"https://github.com/strichliste\"\n        >\n          <GitHubIcon /> Code\n        </a>\n      </div>\n    </Footer>\n  );\n}\n","import React from 'react';\n\nimport { Ellipsis, Button, styled } from 'bricks-of-sand';\n\nconst SearchResultItemButton = styled(Button)({\n  display: 'flex',\n  padding: '1.5rem',\n  width: '100%',\n  alignContent: 'center',\n  justifyContent: 'center',\n  marginBottom: '2px',\n});\n\nexport const SearchResultItem: React.FC<{ name: string; onClick(): void }> = ({\n  name,\n  onClick,\n}) => {\n  return (\n    <SearchResultItemButton onClick={onClick}>\n      <div style={{ width: '250px' }}>\n        <Ellipsis>{name}</Ellipsis>\n      </div>\n    </SearchResultItemButton>\n  );\n};\n","import React, { Suspense } from 'react';\n\n// @ts-ignore\nconst LazyMetrics = React.lazy(() => import('./metrics'));\n\nexport const MetricsView = () => {\n  return (\n    <Suspense fallback=\"...\">\n      <LazyMetrics />\n    </Suspense>\n  );\n};\n","import React, { Suspense } from 'react';\n\n// @ts-ignore\nconst LazyMetrics = React.lazy(() => import('./metrics'));\n\nexport const UserMetricsView = () => {\n  return (\n    <Suspense fallback=\"...\">\n      <LazyMetrics />\n    </Suspense>\n  );\n};\n","import * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { Link } from 'react-router-dom';\n\nfunction TransactionLink(props: RouteComponentProps): JSX.Element {\n  return (\n    <Link to={props.match.url + '/send_money_to_a_friend'}>\n      <FormattedMessage id=\"USER_TRANSACTION_CREATE_LINK\" />\n    </Link>\n  );\n}\n\nexport const CreateUserTransactionLink = withRouter(TransactionLink);\n","import { Ellipsis, styled } from 'bricks-of-sand';\nimport * as React from 'react';\n\nconst Wrapper = styled('div')<{ width?: string; center?: boolean }>(\n  {\n    maxWidth: '100%',\n    display: 'inline-flex',\n  },\n  props => ({\n    width: props.width || '320px',\n    alignContent: props.center ? 'center' : '',\n    justifyContent: props.center ? 'center' : '',\n  })\n);\n\nexport interface UserNameProps {\n  name: string;\n  width?: string;\n  center?: boolean;\n}\n\nexport function UserName(props: UserNameProps): JSX.Element {\n  return (\n    <Wrapper center={props.center} width={props.width}>\n      <Ellipsis>{props.name}</Ellipsis>\n    </Wrapper>\n  );\n}\n","import { AlertText, Card } from 'bricks-of-sand';\nimport * as React from 'react';\n\nimport { useUser } from '../../store';\nimport { Currency } from '../currency';\nimport { UserName } from './user-name';\n\ninterface Props {\n  id: string;\n}\n\nexport function UserCard({ id }: Props): JSX.Element | null {\n  const user = useUser(id);\n  if (!user) {\n    return null;\n  }\n\n  return (\n    <Card\n      flex\n      justifyContent=\"space-between\"\n      flexDirection=\"column\"\n      hover=\"level3\"\n      height=\"6rem\"\n    >\n      <UserName name={user.name} />\n      <AlertText value={user.balance}>\n        <Currency value={user.balance} />\n      </AlertText>\n    </Card>\n  );\n}\n","import { AutoComplete, SearchAutoComplete } from 'bricks-of-sand';\nimport * as React from 'react';\n// import { FormattedMessage } from 'react-intl';\nimport { useUserArray } from '../../store';\nimport { User } from '../../store/reducers';\nimport { FormattedMessage } from 'react-intl';\n\ninterface Props {\n  userId?: string;\n  autoFocus?: boolean;\n  placeholder: string;\n  disabled?: boolean;\n  getString?(user: User): string;\n  onSelect(user: User): void;\n}\n\nexport function UserSelection(props: Props): JSX.Element {\n  const users = useUserArray();\n  const filteredUsers = props.userId\n    ? users.filter(user => Number(user.id) !== Number(props.userId))\n    : users;\n  return <AutoComplete {...props} items={filteredUsers} />;\n}\n\nexport function UserSearch(props: Props): JSX.Element {\n  const users = useUserArray();\n  const filteredUsers = props.userId\n    ? users.filter(user => Number(user.id) !== Number(props.userId))\n    : users;\n\n  return (\n    <FormattedMessage id=\"SEARCH\">\n      {placeholder => (\n        //@ts-ignore\n        <SearchAutoComplete\n          {...props}\n          items={filteredUsers}\n          placeholder={placeholder as string}\n          activeWidth=\"8rem\"\n          inactiveWidth=\"4rem\"\n          clearOnSelect\n        />\n      )}\n    </FormattedMessage>\n  );\n}\n","import * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { useIsTransactionDeletable, store } from '../../store';\nimport { startDeletingTransaction } from '../../store/reducers';\nimport { TextButton } from 'bricks-of-sand';\n\ninterface Props {\n  userId?: string;\n  transactionId: number;\n  onSuccess?(): void;\n}\n\nexport function TransactionUndoButton(props: Props) {\n  const isDeletable = useIsTransactionDeletable(props.transactionId);\n\n  if (!isDeletable) {\n    return null;\n  }\n\n  if (props.userId === undefined) {\n    return null;\n  }\n\n  return (\n    <TextButton\n      onClick={() => {\n        if (typeof props.onSuccess === 'function') {\n          props.onSuccess();\n        }\n        startDeletingTransaction(\n          store.dispatch,\n          props.userId || '',\n          props.transactionId\n        );\n      }}\n    >\n      <FormattedMessage id=\"USER_TRANSACTION_UNDO\" />\n    </TextButton>\n  );\n}\n","import { useSettings, useUserBalance } from '../../store';\nimport { Boundary } from '../../store/reducers';\n\ninterface TransactionArguments {\n  accountBoundary: Boundary;\n  paymentBoundary: Boundary;\n  isDeposit: boolean;\n  balance: number | boolean;\n  value: number;\n}\n\ninterface CheckValidProps {\n  accountBoundaryValue: number | boolean;\n  paymentBoundaryValue: number | boolean;\n  balance: number | boolean;\n  value: number;\n}\n\nfunction checkDepositIsValid({\n  accountBoundaryValue,\n  paymentBoundaryValue,\n  balance,\n  value,\n}: CheckValidProps): boolean {\n  if (\n    typeof paymentBoundaryValue === 'number' &&\n    value > paymentBoundaryValue\n  ) {\n    return false;\n  }\n\n  if (\n    typeof accountBoundaryValue === 'boolean' ||\n    typeof balance === 'boolean'\n  ) {\n    return true;\n  }\n  return value + balance < accountBoundaryValue;\n}\n\nfunction checkDispenseIsValid({\n  accountBoundaryValue,\n  paymentBoundaryValue,\n  balance,\n  value,\n}: CheckValidProps): boolean {\n  if (\n    typeof paymentBoundaryValue === 'number' &&\n    value > paymentBoundaryValue * -1\n  ) {\n    return false;\n  }\n\n  if (\n    typeof accountBoundaryValue === 'boolean' ||\n    typeof balance === 'boolean'\n  ) {\n    return true;\n  }\n  return balance - value > accountBoundaryValue;\n}\n\nexport const isTransactionValid = ({\n  accountBoundary,\n  paymentBoundary,\n  isDeposit,\n  balance,\n  value,\n}: TransactionArguments): boolean => {\n  if (value === 0) {\n    return false;\n  }\n  if (isDeposit) {\n    return checkDepositIsValid({\n      accountBoundaryValue: accountBoundary.upper,\n      paymentBoundaryValue: paymentBoundary.upper,\n      value,\n      balance,\n    });\n  } else {\n    return checkDispenseIsValid({\n      accountBoundaryValue: accountBoundary.lower,\n      paymentBoundaryValue: paymentBoundary.lower,\n      value,\n      balance,\n    });\n  }\n};\n\nexport function useTransactionValidator(\n  value: number,\n  userId: string,\n  isDeposit: boolean = true\n): boolean {\n  const settings = useSettings();\n  const balance = useUserBalance(userId);\n\n  return isTransactionValid({\n    value,\n    balance,\n    isDeposit,\n    accountBoundary: settings.account.boundary,\n    paymentBoundary: settings.payment.boundary,\n  });\n}\n","import * as React from 'react';\nimport { useTransactionValidator } from './validator';\n\ninterface Props {\n  userId: string;\n  targetUserId: string;\n  value: number;\n  render(isValid: boolean): JSX.Element;\n}\n\nexport function UserToUserValidator(props: Props): JSX.Element | null {\n  const userHasTheMoney = useTransactionValidator(\n    props.value,\n    props.userId,\n    false\n  );\n  const receiverCanAcceptTheMoney = useTransactionValidator(\n    props.value,\n    props.targetUserId,\n    true\n  );\n  return <>{props.render(userHasTheMoney && receiverCanAcceptTheMoney)} </>;\n}\n","import {\n  AcceptIcon,\n  Card,\n  Input,\n  PrimaryButton,\n  ResponsiveGrid,\n  styled,\n  withTheme,\n} from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { User, startCreatingTransaction } from '../../store/reducers';\nimport { Currency, CurrencyInput } from '../currency';\nimport { UserSelection } from '../user';\nimport { UserName } from '../user/user-name';\nimport { TransactionUndoButton } from './transaction-undo-button';\nimport { UserToUserValidator } from './user-to-user-validator';\nimport { store } from '../../store';\n\nexport const AcceptWrapper = withTheme(\n  styled('div')({}, props => ({\n    svg: {\n      marginRight: '2rem',\n      fill: props.theme.green,\n    },\n  }))\n);\n\nconst initialState = {\n  selectedAmount: 0,\n  hasSelectionReady: false,\n  selectedUser: {\n    id: '',\n    name: '',\n    isActive: false,\n    balance: 0,\n    created: '',\n    transactions: {},\n  },\n  amount: 0,\n  createdTransactionId: 0,\n  comment: '',\n};\n\ninterface State {\n  amount: number;\n  createdTransactionId: number;\n  hasSelectionReady: boolean;\n  selectedAmount: number;\n  selectedUser: User;\n  comment: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype Props = RouteComponentProps<{ id: string }> & { intl: any };\n\nexport class CreateUserTransactionForm extends React.Component<Props, State> {\n  public state = initialState;\n  public submitUserId = (user: User): void => {\n    if (!user) return;\n\n    if (!this.state.selectedUser.id) {\n      this.setState(() => ({ selectedUser: user }));\n    } else {\n      this.handleSubmit();\n    }\n  };\n\n  public createTransaction = async () => {\n    if (this.state.selectedUser.id && this.state.selectedAmount) {\n      const res = await startCreatingTransaction(\n        store.dispatch,\n        this.props.match.params.id,\n        {\n          amount: this.state.selectedAmount * -1,\n          recipientId: this.state.selectedUser.id,\n          comment: this.state.comment,\n        }\n      );\n      if (res && res.id) {\n        this.setState({\n          hasSelectionReady: true,\n          createdTransactionId: res.id,\n        });\n      }\n    }\n  };\n\n  public handleSubmit = (e?: React.FormEvent<HTMLFormElement>) => {\n    if (e) {\n      e.preventDefault();\n    }\n    if (this.state.selectedUser.id && this.state.selectedAmount) {\n      this.createTransaction();\n    }\n  };\n\n  public setComment = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ comment: event.target.value });\n  };\n\n  public render(): JSX.Element {\n    if (this.state.hasSelectionReady) {\n      return (\n        <Card width=\"100%\" margin=\"1rem 0\" flex justifyContent=\"space-between\">\n          <AcceptWrapper>\n            <AcceptIcon />\n            <FormattedMessage id=\"CREATE_USER_TO_USER_TRANSACTION_SUCCESS\" />{' '}\n            <UserName width=\"120px\" name={this.state.selectedUser.name} />\n            &#8594;\n            <Currency value={this.state.selectedAmount} />\n          </AcceptWrapper>\n          <TransactionUndoButton\n            onSuccess={() =>\n              this.setState({\n                hasSelectionReady: false,\n              })\n            }\n            transactionId={this.state.createdTransactionId}\n            userId={this.props.match.params.id || ''}\n          />\n        </Card>\n      );\n    } else {\n      return (\n        <>\n          <form onSubmit={this.handleSubmit}>\n            <ResponsiveGrid\n              margin=\"1rem 0\"\n              gridGap=\"1rem\"\n              alignItems=\"center\"\n              tabletColumns=\"4fr 1fr 4fr 1fr\"\n            >\n              <FormattedMessage\n                defaultMessage=\"Amount\"\n                id=\"USER_TRANSACTION_FROM_AMOUNT_LABEL\"\n              >\n                {text => (\n                  <CurrencyInput\n                    noNegative\n                    placeholder={text as string}\n                    autoFocus\n                    onChange={value =>\n                      this.setState({\n                        selectedAmount: value,\n                      })\n                    }\n                  />\n                )}\n              </FormattedMessage>\n              &#8594;\n              <FormattedMessage id=\"CREATE_USER_TO_USER_TRANSACTION_USER\">\n                {text => (\n                  <UserSelection\n                    userId={this.props.match.params.id}\n                    placeholder={text as string}\n                    onSelect={this.submitUserId}\n                  />\n                )}\n              </FormattedMessage>\n              <UserToUserValidator\n                value={this.state.selectedAmount}\n                userId={this.props.match.params.id}\n                targetUserId={this.state.selectedUser.id}\n                render={isValid => (\n                  <FormattedMessage id=\"USER_TRANSACTION_CREATE_SUBMIT_TITLE\">\n                    {text => (\n                      <PrimaryButton\n                        title={text as string}\n                        isRound\n                        disabled={!isValid}\n                        type=\"submit\"\n                      >\n                        <AcceptIcon />\n                      </PrimaryButton>\n                    )}\n                  </FormattedMessage>\n                )}\n              />\n            </ResponsiveGrid>\n            <FormattedMessage id=\"CREATE_USER_TO_USER_TRANSACTION_COMMENT\">\n              {text => (\n                <Input\n                  value={this.state.comment}\n                  onChange={this.setComment}\n                  placeholder={text as string}\n                />\n              )}\n            </FormattedMessage>\n          </form>\n        </>\n      );\n    }\n  }\n}\n\nexport const ConnectedCreateCustomTransactionForm = withRouter(\n  CreateUserTransactionForm\n);\n","import { AcceptIcon, Flex } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport {\n  Article,\n  getArticleByBarcode,\n  startCreatingTransaction,\n} from '../../store/reducers';\nimport { Scanner } from '../common/scanner';\nimport { Toast } from '../common/toast';\nimport { Currency } from '../currency';\nimport { AcceptWrapper } from '../transaction/create-user-transaction-form';\nimport { useDispatch } from 'redux-react-hook';\n\ninterface Props {\n  userId: string;\n}\n\nexport const ArticleScanner = (props: Props) => {\n  const [message, setMessage] = React.useState('');\n  const [article, setArticle] = React.useState<Article | undefined>(undefined);\n  const dispatch = useDispatch();\n\n  const handleChange = async (barcode: string) => {\n    setMessage(barcode);\n    try {\n      const article = await getArticleByBarcode(dispatch, barcode);\n      setMessage('ARTICLE_FETCHED_BY_BARCODE');\n      setArticle(article);\n      if (article) {\n        startCreatingTransaction(dispatch, props.userId, {\n          articleId: article.id,\n        });\n      }\n    } catch (error) {\n      setMessage(':(');\n    }\n  };\n  const resetState = () => {\n    setMessage('');\n    setArticle(undefined);\n  };\n\n  return (\n    <>\n      {message && (\n        <Toast onFadeOut={resetState} fadeOutSeconds={6}>\n          <ToastContent article={article} message={message} />\n        </Toast>\n      )}\n      <Scanner onChange={handleChange} />\n    </>\n  );\n};\n\ninterface ToastProps {\n  message: string;\n  article: Article | undefined;\n}\n\nfunction ToastContent({ article, message }: ToastProps): JSX.Element {\n  if (article === undefined) {\n    return <>{message}</>;\n  }\n  return (\n    <AcceptWrapper>\n      <Flex justifyContent=\"center\" alignContent=\"center\">\n        <AcceptIcon />\n        <FormattedMessage id=\"ARTICLE_FETCHED_BY_BARCODE\" />\n        &#8594; {article.name}\n        <Currency value={article.amount} />\n      </Flex>\n    </AcceptWrapper>\n  );\n}\n","import React from 'react';\n\nimport { GreenButton, RedButton, ResponsiveGrid, styled } from 'bricks-of-sand';\nimport { useDispatch } from 'redux-react-hook';\nimport { useIntl } from 'react-intl';\n\nimport { startCreatingTransaction } from '../../store/reducers';\nimport { CurrencyInput } from '../currency';\nimport { useTransactionValidator } from './validator';\nimport { useSettings } from '../../store';\nimport { en } from '../../locales/en';\n\nconst ButtonText = styled('div')({\n  fontSize: '1rem',\n  fontWeight: 'bold',\n  lineHeight: 0,\n});\n\ninterface Props {\n  userId: string;\n  transactionCreated?(): void;\n}\n\nexport const CreateCustomTransactionForm = (props: Props) => {\n  const intl = useIntl();\n  const { userId, transactionCreated } = props;\n  const payment = useSettings().payment;\n  const dispatch = useDispatch();\n  const [value, setValue] = React.useState(0);\n  const depositIsValid = useTransactionValidator(value, userId, true);\n  const dispenseIsValid = useTransactionValidator(value, userId, false);\n\n  const submit = async (isDeposit: boolean) => {\n    const multiplier = isDeposit ? 1 : -1;\n    const amount = value * multiplier;\n\n    const result = await startCreatingTransaction(dispatch, userId, {\n      amount,\n    });\n\n    if (transactionCreated) {\n      transactionCreated();\n    }\n\n    if (result) {\n      setValue(0);\n    }\n  };\n  return (\n    <ResponsiveGrid gridGap=\"1rem\" columns=\"3rem 1fr 3rem\">\n      {payment.dispense.custom ? (\n        <RedButton\n          title={intl.formatMessage({ id: en.BALANCE_DISPENSE })}\n          onClick={() => submit(false)}\n          isRound\n          disabled={!dispenseIsValid}\n          type=\"submit\"\n        >\n          <ButtonText>-</ButtonText>\n        </RedButton>\n      ) : (\n        <div></div>\n      )}\n      <CurrencyInput\n        value={value}\n        placeholder={intl.formatMessage({ id: en.BALANCE_PLACEHOLDER })}\n        onChange={setValue}\n      />\n      {payment.deposit.custom ? (\n        <GreenButton\n          title={intl.formatMessage({ id: en.BALANCE_DEPOSIT })}\n          onClick={() => submit(true)}\n          isRound\n          disabled={!depositIsValid}\n          type=\"submit\"\n        >\n          <ButtonText>+</ButtonText>\n        </GreenButton>\n      ) : (\n        <div></div>\n      )}\n    </ResponsiveGrid>\n  );\n};\n","import * as React from 'react';\n\nimport { GreenButton, RedButton } from 'bricks-of-sand';\nimport { startCreatingTransaction } from '../../store/reducers';\nimport { Currency } from '../currency';\nimport { useTransactionValidator } from './validator';\nimport { store } from '../../store';\n\ninterface Props {\n  userId: string;\n  value: number;\n  isDeposit?: boolean;\n}\n\nexport function TransactionButton(props: Props): JSX.Element {\n  const Button = props.isDeposit ? GreenButton : RedButton;\n  const isValid = useTransactionValidator(\n    props.value,\n    props.userId,\n    props.isDeposit\n  );\n\n  return (\n    <Button\n      padding=\"0.8rem 0.5rem\"\n      onClick={() =>\n        startCreatingTransaction(store.dispatch, props.userId, {\n          amount: props.value,\n        })\n      }\n      type=\"button\"\n      disabled={!isValid}\n    >\n      <Currency value={props.value} />\n    </Button>\n  );\n}\n","import { ResponsiveGrid } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { TransactionButton } from './transaction-button';\n\nexport interface PaymentButtonListProps {\n  steps: number[];\n  userId: string;\n  isDeposit: boolean;\n}\n\nexport function PaymentButtonList(props: PaymentButtonListProps): JSX.Element {\n  const multiplier = props.isDeposit ? 1 : -1;\n  return (\n    <ResponsiveGrid gridGap=\"1rem\" columns=\"1fr 1fr 1fr\">\n      {props.steps.map(step => (\n        <TransactionButton\n          key={step}\n          isDeposit={props.isDeposit}\n          userId={props.userId}\n          value={step * multiplier}\n        />\n      ))}\n    </ResponsiveGrid>\n  );\n}\n","import { Card } from 'bricks-of-sand';\nimport * as React from 'react';\n\nimport { useSettings } from '../../store';\nimport { CreateCustomTransactionForm } from './create-custom-transaction-form';\nimport { PaymentButtonList } from './payment-button-steps';\n\ninterface Props {\n  userId: string;\n}\n\nexport function Payment(props: Props): JSX.Element | null {\n  const payment = useSettings().payment;\n  return (\n    <Card padding=\"0.5rem\">\n      {payment.deposit.enabled && (\n        <PaymentButtonList\n          isDeposit={true}\n          steps={payment.deposit.steps}\n          userId={props.userId}\n        />\n      )}\n      {payment.deposit.custom || payment.dispense.custom ? (\n        <div style={{ margin: '1rem' }}>\n          <CreateCustomTransactionForm userId={props.userId} />\n        </div>\n      ) : (\n        <div style={{ margin: '2rem' }}></div>\n      )}\n      {payment.dispense.enabled && (\n        <PaymentButtonList\n          isDeposit={false}\n          steps={payment.dispense.steps}\n          userId={props.userId}\n        />\n      )}\n    </Card>\n  );\n}\n","import * as React from 'react';\n\nexport const ShoppingBagIcon = () => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"15\"\n    viewBox=\"0 0 16 15\"\n  >\n    <path d=\"M1.15555556,7 L1,7 C0.44771525,7 0,6.55228475 0,6 C0,5.44771525 0.44771525,5 1,5 L3.05025253,5 L3,4.94974747 L7.24264069,0.707106781 C7.63316498,0.316582489 8.26632996,0.316582489 8.65685425,0.707106781 L12.8994949,4.94974747 L12.8492424,5 L15,5 C15.5522847,5 16,5.44771525 16,6 C16,6.55228475 15.5522847,7 15,7 L14.8444444,7 L13.8632912,13.307414 C13.711755,14.2815752 12.8729351,15 11.8870582,15 L4.11294178,15 C3.1270649,15 2.28824503,14.2815752 2.13670885,13.307414 L1.15555556,7 Z M10.4748737,5 L7.94974747,2.47487373 L5.4246212,5 L10.4748737,5 Z M5.64704761,8.08518543 C5.38031456,8.01371453 5.10614608,8.17200577 5.03467518,8.43873882 L3.999399,12.3024421 C3.92792809,12.5691752 4.08621934,12.8433437 4.35295239,12.9148146 C4.61968544,12.9862855 4.89385392,12.8279942 4.96532482,12.5612612 L6.000601,8.69755787 C6.07207191,8.43082482 5.91378066,8.15665634 5.64704761,8.08518543 Z M8.64704761,8.08518543 C8.38031456,8.01371453 8.10614608,8.17200577 8.03467518,8.43873882 L6.999399,12.3024421 C6.92792809,12.5691752 7.08621934,12.8433437 7.35295239,12.9148146 C7.61968544,12.9862855 7.89385392,12.8279942 7.96532482,12.5612612 L9.000601,8.69755787 C9.07207191,8.43082482 8.91378066,8.15665634 8.64704761,8.08518543 Z M11.6470476,8.08518543 C11.3803146,8.01371453 11.1061461,8.17200577 11.0346752,8.43873882 L9.999399,12.3024421 C9.92792809,12.5691752 10.0862193,12.8433437 10.3529524,12.9148146 C10.6196854,12.9862855 10.8938539,12.8279942 10.9653248,12.5612612 L12.000601,8.69755787 C12.0720719,8.43082482 11.9137807,8.15665634 11.6470476,8.08518543 Z\" />\n  </svg>\n);\n","import {\n  AlertText,\n  Ellipsis,\n  LineThrough,\n  ListItem,\n  ResponsiveGrid,\n  Theme,\n  styled,\n  withTheme,\n} from 'bricks-of-sand';\nimport * as React from 'react';\nimport { Currency } from '../currency';\nimport { ShoppingBagIcon } from '../ui/icons/shopping-bag';\nimport { TransactionUndoButton } from './transaction-undo-button';\nimport { useTransaction } from '../../store';\nimport { getUserDetailLink } from '../user/user-router';\nimport { Link } from 'react-router-dom';\nimport { User, Article } from '../../store/reducers';\n\nconst InLineLink = styled(Link)({\n  display: 'inline !important',\n});\n\nconst ArticleIcon = withTheme(\n  styled('span')({}, ({ theme }) => ({\n    fill: (theme as Theme).primary,\n  }))\n);\n\ninterface Props {\n  id: number | string;\n}\n\nconst TextRight = styled(ResponsiveGrid)({\n  textAlign: 'right',\n});\n\ninterface ListItemProps {\n  user?: User;\n  article?: Article;\n  isSender: boolean;\n  comment?: string;\n}\n\nconst ListItemDescription = ({\n  user,\n  article,\n  isSender,\n  comment,\n}: ListItemProps) => {\n  const composedComment = (user && comment ? ':' : '') + (comment || '');\n  const title =\n    (article ? article.name : '') + (user ? user.name : '') + composedComment;\n  return (\n    <Ellipsis title={title}>\n      {user && (\n        <InLineLink to={getUserDetailLink(user.id)}>\n          {isSender ? <>&#8592;</> : <>&#8594;</>} {user.name}\n        </InLineLink>\n      )}\n      {article && (\n        <>\n          <ArticleIcon>\n            <ShoppingBagIcon />\n          </ArticleIcon>{' '}\n          {article.name}\n        </>\n      )}\n      {composedComment}\n    </Ellipsis>\n  );\n};\n\nexport function TransactionListItem({ id }: Props): JSX.Element | null {\n  const transaction = useTransaction(Number(id));\n  if (!transaction) {\n    return null;\n  }\n  return (\n    <ListItem>\n      <LineThrough lineThrough={transaction.isDeleted}>\n        <ResponsiveGrid gridGap=\"0\" margin=\"0\" columns=\"2fr 1fr\">\n          <ResponsiveGrid\n            gridGap=\"0\"\n            margin=\"0\"\n            columns=\"1fr\"\n            tabletColumns=\"1fr 1fr\"\n          >\n            <AlertText value={transaction.amount}>\n              <Currency value={transaction.amount} />\n            </AlertText>\n            <ListItemDescription\n              article={transaction.article}\n              isSender={!!transaction.sender}\n              comment={transaction.comment}\n              user={transaction.sender || transaction.recipient}\n            />\n          </ResponsiveGrid>\n          <TextRight>\n            {transaction.isDeletable ? (\n              <TransactionUndoButton\n                transactionId={transaction.id}\n                userId={transaction.user.id}\n              />\n            ) : (\n              <Ellipsis>{transaction.created}</Ellipsis>\n            )}\n          </TextRight>\n        </ResponsiveGrid>\n      </LineThrough>\n    </ListItem>\n  );\n}\n","import * as React from 'react';\n\nexport function AcceptIcon(): JSX.Element {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"19\"\n      height=\"13\"\n      viewBox=\"0 0 19 13\"\n    >\n      <polygon points=\"7 10.271 7.212 9.559 16.724 0 18.224 1.5 7 12.71 0 5.771 1.5 4.271 6.788 9.559\" />\n    </svg>\n  );\n}\n","import { MultiSelectionBox } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { useUserState } from '../../store';\nimport { UsersState } from '../../store/reducers';\n\nexport interface UserMultiSelectionProps {\n  excludeUserId: string;\n  placeholder: string;\n  validation: { [userId: string]: string };\n  onSelect(selection: UsersState): void;\n}\n\nexport function UserMultiSelection({\n  placeholder,\n  excludeUserId,\n  onSelect,\n  validation,\n}: UserMultiSelectionProps): JSX.Element | null {\n  const users = useUserState();\n\n  return (\n    <MultiSelectionBox\n      //@ts-ignore\n      excludeIds={[excludeUserId]}\n      errorMessageMap={validation}\n      //@ts-ignore\n      getItemIndex={user => (user ? user.id : 0)}\n      itemToString={user => user.name}\n      items={users}\n      onSelect={onSelect}\n      placeholder={placeholder}\n    />\n  );\n}\n","import {\n  AcceptButton,\n  Block,\n  Input,\n  PrimaryButton,\n  ResponsiveGrid,\n  Separator,\n  styled,\n  Icon,\n} from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { store } from '../../../store';\nimport {\n  CreateTransactionParams,\n  Transaction,\n  User,\n  UsersState,\n  startCreatingTransaction,\n} from '../../../store/reducers';\nimport { WrappedIdleTimer } from '../../common/idle-timer';\nimport { Currency, CurrencyInput } from '../../currency';\nimport { AcceptIcon } from '../../ui/icons/accept';\nimport { UserSelection } from '../../user';\nimport { UserMultiSelection } from '../../user/user-multi-selection';\nimport { UserName } from '../../user/user-name';\nimport { isTransactionValid } from '../validator';\n\ninterface State {\n  isLoading: boolean;\n  recipient: User | undefined;\n  participants: User[];\n  comment: string;\n  amount: number;\n  responseState: { [userId: string]: Transaction | 'error' };\n  validation: { [userId: string]: string };\n}\n\nconst initialState: State = {\n  isLoading: false,\n  recipient: undefined,\n  participants: [],\n  comment: '',\n  amount: 0,\n  responseState: {},\n  validation: {},\n};\n\nconst GridContainer = styled('div')({\n  maxWidth: '30em',\n  margin: '2rem auto',\n  padding: '0 1rem',\n});\n\nconst P = styled('p')({\n  marginBottom: '0.5rem',\n});\n\nconst NotificationContainer = styled('div')({\n  textAlign: 'center',\n  marginBottom: '1rem',\n});\n\nconst TextCenter = styled(Block)({\n  textAlign: 'center',\n});\n\nexport class SplitInvoiceForm extends React.Component<{}, State> {\n  public state = initialState;\n\n  public resetState = () => {\n    this.setState(initialState);\n  };\n\n  public submitSplitInvoice = async () => {\n    this.state.participants.forEach(async participant => {\n      await this.createTransaction(participant);\n    });\n  };\n\n  public createTransaction = async (participant: User) => {\n    if (this.formIsValid() && this.state.recipient) {\n      this.setState({ isLoading: true });\n      const userId = participant.id;\n      const params = this.getParams(this.state.recipient);\n      const result = await startCreatingTransaction(\n        store.dispatch,\n        userId,\n        params\n      );\n\n      this.setState(state => ({\n        responseState: {\n          ...state.responseState,\n          [userId]: result || 'error',\n        },\n      }));\n    }\n  };\n\n  public getParams = (recipient: User): CreateTransactionParams => {\n    return {\n      comment: this.state.comment,\n      recipientId: recipient.id,\n      amount: this.getSplitAmount() * -1,\n    };\n  };\n\n  public setRecipient = (user: User) => {\n    this.setState({ recipient: user });\n  };\n\n  public setAmount = (amount: number) => {\n    this.setState({ amount }, this.updateValidation);\n  };\n\n  public setComment = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ comment: e.target.value });\n  };\n\n  public addParticipant = (user: UsersState) => {\n    this.setState(\n      {\n        participants: Object.values(user),\n      },\n      this.updateValidation\n    );\n  };\n\n  public removeParticipant = (userToRemove: User) => {\n    this.setState(\n      state => ({\n        participants: [\n          ...state.participants.filter(user => user.name !== userToRemove.name),\n        ],\n      }),\n      this.updateValidation\n    );\n  };\n\n  public getRecipientUserId = (recipient?: User) => {\n    if (recipient) {\n      return recipient.id;\n    } else {\n      return 0;\n    }\n  };\n\n  public getSplitAmount = () => {\n    const result =\n      this.state.amount / this.getLengthOfParticipantsAndRecipient();\n    return isNaN(result) ? 0 : result;\n  };\n\n  public getLengthOfParticipantsAndRecipient = () => {\n    return this.state.participants.length + (this.state.recipient ? 1 : 0);\n  };\n\n  public submitIsValid = () => {\n    return this.showNotification() && this.formIsValid();\n  };\n\n  public getTransactionId = (participant: User): number => {\n    const transaction = this.state.responseState[participant.id];\n    if (transaction && transaction !== 'error') {\n      return transaction.id;\n    } else {\n      return 0;\n    }\n  };\n\n  public hasErrorState = (participant: User): boolean => {\n    const transactionState = this.state.responseState[participant.id];\n    return transactionState === 'error';\n  };\n\n  public updateValidation = () => {\n    const value = this.getSplitAmount();\n    const accountBoundary = store.getState().settings.account.boundary;\n    const paymentBoundary = store.getState().settings.payment.boundary;\n    const initialValue: { [key: number]: string } = {};\n    const validation = Object.values(this.state.participants).reduce(\n      (acc, participant) => {\n        return {\n          ...acc,\n          [participant.id]: isTransactionValid({\n            value,\n            isDeposit: false,\n            accountBoundary,\n            paymentBoundary,\n            balance: participant.balance,\n          })\n            ? ''\n            : `can't afford it`,\n        };\n      },\n      initialValue\n    );\n\n    this.setState({ validation });\n  };\n\n  public formIsValid = () => {\n    return Object.values(this.state.validation).every(item => item === '');\n  };\n\n  public showNotification = () => {\n    return !!(\n      this.state.amount > 0 &&\n      this.state.participants.length &&\n      this.state.recipient\n    );\n  };\n\n  public render(): JSX.Element {\n    if (this.state.isLoading) {\n      return (\n        <GridContainer>\n          {Object.keys(this.state.responseState).length === 0 && (\n            <div>\n              <FormattedMessage\n                id=\"SPLIT_INVOICE_LOADING\"\n                defaultMessage=\"creating transactions\"\n              />\n            </div>\n          )}\n          {Object.keys(this.state.responseState).map(userId => {\n            const item = this.state.responseState[userId];\n            const user = this.state.participants.find(\n              user => user.id == userId\n            );\n            const userName = user ? user.name : '';\n\n            if (item === 'error') {\n              return (\n                <Block margin=\"1rem 0\" key={userId}>\n                  <FormattedMessage\n                    id=\"SPLIT_INVOICE_ERROR_MESSAGE\"\n                    defaultMessage=\"Failed to create Transaction for\"\n                  />{' '}\n                  <UserName name={userName} />\n                </Block>\n              );\n            }\n            return (\n              <Block margin=\"1rem 0\" key={userId}>\n                <Icon color=\"greenText\">\n                  <AcceptIcon />\n                </Icon>\n                <UserName name={userName} />\n                <p>\n                  <FormattedMessage\n                    id=\"SPLIT_INVOICE_SUCCESS_MESSAGE\"\n                    defaultMessage=\"payed the money\"\n                  />\n                </p>\n              </Block>\n            );\n          })}\n          <AcceptButton onClick={this.resetState} />\n        </GridContainer>\n      );\n    }\n\n    return (\n      <GridContainer>\n        <WrappedIdleTimer />\n        <TextCenter margin=\"3rem\">\n          <h1>\n            <FormattedMessage id=\"SPLIT_INVOICE_HEADLINE\" />\n          </h1>\n        </TextCenter>\n\n        <ResponsiveGrid\n          margin=\"0 0 1rem 0\"\n          gridGap=\"1rem\"\n          columns=\"2fr 1fr 2fr\"\n        >\n          <FormattedMessage\n            id=\"USER_TRANSACTIONS_TABLE_AMOUNT\"\n            children={placeholder => (\n              <CurrencyInput\n                placeholder={placeholder as string}\n                value={this.state.amount}\n                onChange={this.setAmount}\n              />\n            )}\n          />\n          <TextCenter>\n            <FormattedMessage id=\"WITH\" defaultMessage=\"with\" />\n          </TextCenter>\n          <FormattedMessage\n            id=\"SELECT_RECIPIENT\"\n            defaultMessage=\"select recipient\"\n            children={placeholder => (\n              <UserSelection\n                placeholder={placeholder as string}\n                autoFocus\n                onSelect={this.setRecipient}\n              />\n            )}\n          />\n        </ResponsiveGrid>\n        <FormattedMessage\n          id=\"USER_TRANSACTIONS_TABLE_COMMENT\"\n          children={placeholder => (\n            <Input\n              value={this.state.comment}\n              onChange={this.setComment}\n              placeholder={placeholder as string}\n            />\n          )}\n        />\n        <TextCenter margin=\"1rem 0\">\n          <FormattedMessage id=\"AND\" defaultMessage=\"and\" />\n        </TextCenter>\n        <Block margin=\"1rem 0\">\n          <UserMultiSelection\n            excludeUserId={this.state.recipient ? this.state.recipient.id : ''}\n            validation={this.state.validation}\n            onSelect={this.addParticipant}\n            placeholder=\"add participant\"\n          />\n        </Block>\n        {this.showNotification() && (\n          <>\n            <Separator margin=\"2rem 0\" />\n            <NotificationContainer>\n              <P>\n                {this.getLengthOfParticipantsAndRecipient()}{' '}\n                <FormattedMessage\n                  id=\"PARTICIPANTS\"\n                  defaultMessage=\"participants\"\n                />{' '}\n                <FormattedMessage id=\"SPLIT\" defaultMessage=\"split\" />{' '}\n                <Currency value={this.state.amount} />\n              </P>\n              <P>\n                <FormattedMessage\n                  id=\"SPLIT_PAY_MESSAGE\"\n                  defaultMessage=\"everybody has to pay\"\n                />{' '}\n                <Currency value={this.getSplitAmount()} />\n                {this.state.recipient && (\n                  <>\n                    <FormattedMessage\n                      id=\"SPLIT_INVOICE_RECIPIENT_NOTE\"\n                      defaultMessage=\" to \"\n                    />\n                    <UserName name={this.state.recipient.name} />\n                  </>\n                )}\n              </P>\n              <FormattedMessage id=\"SPLIT_INVOICE_SUBMIT\">\n                {text => (\n                  <PrimaryButton\n                    title={text as string}\n                    isRound\n                    onClick={this.submitSplitInvoice}\n                    disabled={!this.submitIsValid()}\n                  >\n                    <AcceptIcon />\n                  </PrimaryButton>\n                )}\n              </FormattedMessage>\n            </NotificationContainer>\n          </>\n        )}\n      </GridContainer>\n    );\n  }\n}\n","import * as React from 'react';\n\nexport function TransactionIcon(): JSX.Element {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\"\n      height=\"18\"\n      viewBox=\"0 0 16 18\"\n    >\n      <path d=\"M11.6850112,6 L5,6 C3.34314575,6 2,7.34314575 2,9 L2,10 L0,10 L0,9 C0,6.23857625 2.23857625,4 5,4 L11.6850112,4 L10.6073147,3.49025739 L8.67276818,1.50221105 L10.1345536,0 L15,5 L10.1345536,10 L8.67276818,8.49778895 L10.6641888,6.45129568 L11.6850112,6 Z M4.31498875,12 L11,12 C12.6568542,12 14,10.6568542 14,9 L14,8 L16,8 L16,9 C16,11.7614237 13.7614237,14 11,14 L4.31498875,14 L5.39268526,14.5097426 L7.32723182,16.497789 L5.86544636,18 L1,13 L5.86544636,8 L7.32723182,9.50221105 L5.33581117,11.5487043 L4.31498875,12 Z\" />\n    </svg>\n  );\n}\n","import * as React from 'react';\n\nexport function ProductIcon(): JSX.Element {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n    >\n      <path d=\"M1,0 L6,0 C6.55228475,0 7,0.44771525 7,1 L7,6 C7,6.55228475 6.55228475,7 6,7 L1,7 C0.44771525,7 0,6.55228475 0,6 L0,1 C0,0.44771525 0.44771525,0 1,0 Z M10,0 L15,0 C15.5522847,0 16,0.44771525 16,1 L16,6 C16,6.55228475 15.5522847,7 15,7 L10,7 C9.44771525,7 9,6.55228475 9,6 L9,1 C9,0.44771525 9.44771525,0 10,0 Z M12.5,9 C14.4329966,9 16,10.5670034 16,12.5 C16,14.4329966 14.4329966,16 12.5,16 C10.5670034,16 9,14.4329966 9,12.5 C9,10.5670034 10.5670034,9 12.5,9 Z M1,9 L6,9 C6.55228475,9 7,9.44771525 7,10 L7,15 C7,15.5522847 6.55228475,16 6,16 L1,16 C0.44771525,16 0,15.5522847 0,15 L0,10 C0,9.44771525 0.44771525,9 1,9 Z\" />\n    </svg>\n  );\n}\n","import { AcceptButton, styled } from 'bricks-of-sand';\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport { useSettings } from '../../store';\nimport { Currency, CurrencyInput } from '../currency';\nimport { useTransactionValidator } from '../transaction/validator';\n\nconst Wrapper = styled('div')({\n  form: {\n    display: 'flex',\n    marginBottom: '1rem',\n  },\n  input: {\n    grow: 1,\n    marginRight: '1rem',\n  },\n});\n\ninterface Props {\n  userName: string;\n  userId: string;\n}\n\n// eslint-disable-next-line react/display-name\nexport const PayPalTransactionForm = React.memo((props: Props) => {\n  const formRef = React.useRef<HTMLFormElement | null>(null);\n  const settings = useSettings();\n  const [value, setValue] = React.useState(0);\n  const isValid = useTransactionValidator(value, props.userId);\n  const numberAmount = value / 100;\n\n  const BASE_URL = settings.paypal.sandbox\n    ? 'https://www.sandbox.paypal.com/cgi-bin/webscr'\n    : 'https://www.paypal.com/cgi-bin/webscr';\n  const returnUrl = `${window.location.href}/${numberAmount}`;\n  const returnCancelUrl = window.location.href;\n  const fee = numberAmount * (settings.paypal.fee / 100) || null;\n  const amount = fee ? numberAmount + fee : numberAmount;\n\n  const submit = () => {\n    const { current } = formRef;\n    if (current) {\n      current.submit();\n    }\n  };\n\n  return (\n    <>\n      <Wrapper>\n        <form ref={formRef} action={BASE_URL} method=\"post\">\n          <CurrencyInput autoFocus value={value} onChange={setValue} />\n          <input type=\"hidden\" name=\"cmd\" value=\"_xclick\" />\n          <input\n            type=\"hidden\"\n            name=\"business\"\n            value={settings.paypal.recipient}\n          />\n          <input\n            type=\"hidden\"\n            name=\"item_name\"\n            value={`STRICHLISTE: ${props.userName}`}\n          />\n          <input type=\"hidden\" name=\"no_shipping\" value=\"1\" />\n          <input type=\"hidden\" name=\"no_note\" value=\"1\" />\n          <input type=\"hidden\" name=\"amount\" value={amount} />\n          <input type=\"hidden\" name=\"return\" value={returnUrl} />\n          <input type=\"hidden\" name=\"cancel_return\" value={returnCancelUrl} />\n          <input type=\"hidden\" name=\"rm\" value=\"1\" />\n          <input\n            type=\"hidden\"\n            name=\"currency_code\"\n            value={settings.i18n.currency.alpha3}\n          />\n          <AcceptButton onClick={submit} disabled={!isValid} />\n        </form>\n      </Wrapper>\n      {fee && (\n        <p>\n          <FormattedMessage id=\"PAY_PAL_FEE_LABEL\" defaultMessage=\"fee: \" />\n          <Currency value={fee * 100} />\n        </p>\n      )}\n    </>\n  );\n});\n","import { Block, styled } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { useDispatch } from 'redux-react-hook';\n\nimport { useUserName } from '../../store';\nimport { Transaction, startCreatingTransaction } from '../../store/reducers';\nimport { getUserDetailLink, getUserPayPalLink } from '../user/user-router';\nimport { PayPalTransactionForm } from './paypal-transaction-form';\n\nconst H2 = styled('h2')({\n  textAlign: 'center',\n  marginBottom: '1rem',\n});\n\nexport type PayPalTransactionProps = RouteComponentProps<{\n  id: string;\n  state: string;\n  amount: string;\n}>;\n\nexport const PayPalTransaction = withRouter((props: PayPalTransactionProps) => {\n  const userId = props.match.params.id;\n  const paidAmount = Number(props.match.params.amount);\n\n  const userName = useUserName(userId);\n  const dispatch = useDispatch();\n\n  React.useEffect(() => {\n    if (paidAmount) {\n      startCreatingTransaction(dispatch, userId, {\n        amount: paidAmount * 100,\n        comment: 'paypal',\n      }).then((response: Transaction | undefined) => {\n        if (response && response) {\n          props.history.push(getUserDetailLink(userId));\n        } else {\n          props.history.push(`${getUserPayPalLink(userId)}/error`);\n        }\n      });\n    }\n  }, [paidAmount]);\n\n  return (\n    <Block padding=\"2rem 0\">\n      <H2>\n        <FormattedMessage\n          id=\"PAYPAL_HEADING\"\n          defaultMessage=\"Charge by paypal\"\n        />\n      </H2>\n      {props.match.params.amount === 'error' ? (\n        <FormattedMessage\n          id=\"PAYPAL_ERROR\"\n          defaultMessage=\"Could not create the STRICHLISTE Transaction :(\"\n        />\n      ) : (\n        <PayPalTransactionForm userName={userName} userId={userId} />\n      )}\n    </Block>\n  );\n});\n","import * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Redirect, Route, RouteComponentProps, Switch } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { WrappedIdleTimer } from '../common/idle-timer';\nimport { UserMetricsView } from '../metrics';\nimport { UserDetails } from './user-details';\nimport { TransactionOverview } from './views/transaction-overview';\nimport { User } from './views/user';\nimport { useSettings } from '../../store';\n\nexport function UserRouter(): JSX.Element {\n  return (\n    <Switch>\n      <Route\n        path=\"/user/active\"\n        exact={true}\n        render={props => <User {...props} isActive={true} />}\n      />\n      <Route\n        path=\"/user/inactive\"\n        exact={true}\n        render={props => <User {...props} isActive={false} />}\n      />\n      <Route\n        path=\"/user/active/add\"\n        exact={true}\n        render={props => (\n          <>\n            <WrappedIdleTimer />\n            <User {...props} showCreateUserForm={true} isActive={true} />\n          </>\n        )}\n      />\n      <Route\n        path=\"/user/inactive/add\"\n        exact={true}\n        render={props => (\n          <>\n            <WrappedIdleTimer />\n            <User {...props} showCreateUserForm={true} isActive={false} />\n          </>\n        )}\n      />\n      <Route\n        path=\"/user/inactive\"\n        exact={true}\n        render={props => <User {...props} isActive={false} />}\n      />\n      <Route\n        path=\"/user/transactions/:id/:page\"\n        exact={true}\n        render={props => (\n          <>\n            <WrappedIdleTimer />\n            <TransactionOverview {...props} />\n          </>\n        )}\n      />\n      <Route\n        path=\"/user/:id/metrics\"\n        render={() => (\n          <>\n            <WrappedIdleTimer />\n            <UserMetricsView />\n          </>\n        )}\n      />\n      <Route\n        path=\"/user/:id\"\n        render={props => (\n          <>\n            <WrappedIdleTimer />\n            <UserDetails {...props} />\n          </>\n        )}\n      />\n      <Redirect from=\"/\" to=\"/user/active\" />\n    </Switch>\n  );\n}\n\nexport function UserArticleTransactionLink(props: { id: number }): JSX.Element {\n  return (\n    <Link to={`/user/${props.id}/article`}>\n      <FormattedMessage id=\"USER_ARTICLE_LINK\" />\n    </Link>\n  );\n}\n\nexport function getUserDetailLink(id: string): string {\n  return `/user/${id}`;\n}\n\nexport function getUserTransactionsLink(id: string, page: number = 0): string {\n  return `/user/transactions/${id}/${page}`;\n}\n\nexport function getUserPayPalLink(id: string): string {\n  return `${getUserDetailLink(id)}/paypal`;\n}\n\nexport type UserRouteProps = RouteComponentProps<{ id: string }>;\n\nexport function useUserDetailUrl(): (id: string) => string {\n  const settings = useSettings();\n  const redirect = settings.article.autoOpen ? '/article' : '';\n\n  return (id: string) => getUserDetailLink(id) + redirect;\n}\n","import { CancelButton, Flex, Input, styled, Button } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { useDispatch } from 'redux-react-hook';\n\nimport { usePopularArticles } from '../../store';\nimport { Article, startLoadingArticles } from '../../store/reducers';\nimport { Currency } from '../currency';\nimport { ArticleValidator } from './validator';\n\nconst InputSection = styled(Flex)({\n  padding: '0 1rem',\n  margin: '3rem auto 0 auto',\n  maxWidth: '20rem',\n  button: {\n    marginLeft: '1rem',\n  },\n});\n\ninterface Props {\n  userId: string;\n  onSelect(article: Article): void;\n  onCancel(): void;\n}\n\nconst ARTICLE_BUBBLE_LIMIT = 10;\nexport const ArticleSelectionBubbles = (props: Props) => {\n  const items = usePopularArticles();\n  const dispatch = useDispatch();\n  const [query, setQuery] = React.useState('');\n\n  React.useEffect(() => {\n    startLoadingArticles(dispatch, true);\n  }, []);\n\n  return (\n    <div>\n      <InputSection>\n        <Input value={query} onChange={e => setQuery(e.target.value)} />\n        <CancelButton onClick={props.onCancel} />\n      </InputSection>\n      <Flex margin=\"2rem 0 0 0\" flexWrap=\"wrap\" justifyContent=\"center\">\n        {items\n          .filter(\n            item =>\n              !query || item.name.toLowerCase().includes(query.toLowerCase())\n          )\n          .slice(0, ARTICLE_BUBBLE_LIMIT)\n          .map(item => (\n            <ArticleValidator\n              key={item.name}\n              userId={props.userId}\n              value={item.amount}\n              render={isValid => (\n                <Button\n                  disabled={!isValid}\n                  onClick={() => {\n                    if (isValid) {\n                      props.onSelect(item);\n                    }\n                  }}\n                  padding=\"0.5rem\"\n                  margin=\"0.3rem\"\n                >\n                  {item.name} | <Currency hidePlusSign value={item.amount} />\n                </Button>\n              )}\n            />\n          ))}\n      </Flex>\n    </div>\n  );\n};\n","import * as React from 'react';\nimport { Article, startCreatingTransaction } from '../../../store/reducers';\nimport { ArticleSelectionBubbles } from '../../article/article-selection-bubbles';\nimport { getUserDetailLink, UserRouteProps } from '../user-router';\nimport { useDispatch } from 'redux-react-hook';\nimport { Dispatch } from '../../../store/store';\n\nasync function onSelect(\n  dispatch: Dispatch,\n  article: Article,\n  props: Props\n): Promise<void> {\n  if (!article) return;\n  const result = await startCreatingTransaction(\n    dispatch,\n    props.match.params.id,\n    {\n      articleId: article.id,\n    }\n  );\n  if (result) {\n    props.history.push(getUserDetailLink(props.match.params.id));\n  }\n}\n\ntype Props = UserRouteProps;\n\nexport function UserArticleTransaction(props: Props): JSX.Element | null {\n  const dispatch = useDispatch();\n\n  return (\n    <ArticleSelectionBubbles\n      userId={props.match.params.id}\n      onCancel={() =>\n        props.history.push(getUserDetailLink(props.match.params.id))\n      }\n      onSelect={article => onSelect(dispatch, article, props)}\n    />\n  );\n}\n","import React from 'react';\nimport { withTheme, Button, AcceptIcon } from 'bricks-of-sand';\n\nexport const AcceptButton = withTheme(\n  ({ theme, margin, onClick, disabled, type = 'button', title }: any) => (\n    <Button\n      title={title}\n      disabled={disabled}\n      type={type}\n      onClick={onClick}\n      margin={margin}\n      color={theme.buttonAcceptFont}\n      hasShadow\n      background={theme.buttonAcceptBackground}\n      fontSize=\"1rem\"\n      isRound\n    >\n      <AcceptIcon />\n    </Button>\n  )\n);\n","import React from 'react';\n\nimport { Block, CancelButton, Flex, Input } from 'bricks-of-sand';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { useDispatch } from 'redux-react-hook';\nimport { useUser } from '../../store';\nimport { startUpdateUser } from '../../store/reducers';\nimport { AcceptButton } from '../../components/ui/button';\n\ninterface Props {\n  userId: string;\n  onSave(): void;\n  onCancel(): void;\n  onDisabled(): void;\n}\n\nexport const UserEditForm = (props: Props) => {\n  const intl = useIntl();\n  const [name, setName] = React.useState(''),\n    [email, setEmail] = React.useState(''),\n    [isDisabled, setDisabled] = React.useState(false),\n    user = useUser(props.userId),\n    dispatch = useDispatch(),\n    submit = async (e: React.FormEvent<HTMLFormElement>): Promise<void> => {\n      e.preventDefault();\n\n      const user = await startUpdateUser(dispatch, props.userId, {\n        name,\n        email,\n        isDisabled,\n      });\n\n      if (user && user.isDisabled) {\n        props.onDisabled();\n        return;\n      }\n      if (user && user.id) {\n        props.onSave();\n      }\n    };\n\n  React.useEffect(() => {\n    if (user) {\n      setName(user.name);\n      setEmail(user.email || '');\n      setDisabled(user.isDisabled || false);\n    }\n  }, [props.userId]);\n\n  return (\n    <>\n      <form onSubmit={submit}>\n        <Block margin=\"1rem 0\">\n          <FormattedMessage\n            id=\"USER_EDIT_NAME_LABEL\"\n            children={text => (\n              <Input\n                placeholder={text as string}\n                value={name}\n                onChange={e => setName(e.target.value)}\n                minLength={1}\n                maxLength={64}\n                required\n                type=\"text\"\n              />\n            )}\n          />\n        </Block>\n        <Block margin=\"1rem 0\">\n          <FormattedMessage\n            id=\"USER_EDIT_MAIL_LABEL\"\n            children={text => (\n              <Input\n                placeholder={text as string}\n                value={email || ''}\n                onChange={e => setEmail(e.target.value)}\n                type=\"email\"\n              />\n            )}\n          />\n        </Block>\n        <Block margin=\"1rem 0\">\n          <Flex alignContent=\"center\" justifyContent=\"space-between\">\n            <label>\n              <input\n                checked={isDisabled}\n                onChange={e => setDisabled(e.target.checked)}\n                type=\"checkbox\"\n              />\n              <FormattedMessage id=\"USER_EDIT_ACTIVE_LABEL\" />\n            </label>\n            <div>\n              <CancelButton margin=\"0 1rem\" onClick={props.onCancel} />\n\n              <AcceptButton\n                type=\"submit\"\n                title={intl.formatMessage({ id: 'USER_EDIT_TRIGGER' })}\n              />\n            </div>\n          </Flex>\n          {isDisabled && <FormattedMessage id=\"USER_EDIT_ACTIVE_WARNING\" />}\n        </Block>\n      </form>\n    </>\n  );\n};\n","import * as React from 'react';\nimport { UserEditForm } from '../edit-user-form';\nimport { UserRouteProps, getUserDetailLink } from '../user-router';\n\nfunction navigateToUserDetails(props: UserRouteProps, id: string): void {\n  props.history.push(getUserDetailLink(id));\n}\nfunction navigateHome(props: UserRouteProps): void {\n  props.history.push('/user/active');\n}\n\nexport function UserEditView(props: UserRouteProps): JSX.Element {\n  const id = props.match.params.id;\n  return (\n    <UserEditForm\n      onCancel={() => navigateToUserDetails(props, id)}\n      onSave={() => navigateToUserDetails(props, id)}\n      onDisabled={() => navigateHome(props)}\n      userId={id}\n    />\n  );\n}\n","import * as React from 'react';\nimport { Route, RouteComponentProps, Switch } from 'react-router';\n\nimport { PayPalTransaction } from '../paypal/paypal-transaction';\nimport { UserArticleTransaction } from '../user/views/user-article-transaction';\nimport { UserEditView } from '../user/views/user-edit-view';\nimport { CreateUserTransactionForm } from '../transaction';\n\nexport function UserDetailRouter(): JSX.Element {\n  return (\n    <Switch>\n      <Route path=\"/user/:id/article\" component={UserArticleTransaction} />\n      <Route path=\"/user/:id/edit\" exact={true} component={UserEditView} />\n      <Route\n        path=\"/user/:id/send_money_to_a_friend\"\n        exact={true}\n        component={CreateUserTransactionForm}\n      />\n      <Route\n        path=\"/user/:id/paypal\"\n        exact={true}\n        component={PayPalTransaction}\n      />\n      <Route\n        path=\"/user/:id/paypal/:amount\"\n        exact={true}\n        component={PayPalTransaction}\n      />\n    </Switch>\n  );\n}\n\nexport type UserRouteParams = RouteComponentProps<{ id: string }>;\n","import {\n  AlertText,\n  Tab,\n  styled,\n  withTheme,\n  PayPal,\n  Icon,\n} from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { NavLink, RouteComponentProps, withRouter } from 'react-router-dom';\nimport { useSettings } from '../../store';\nimport { User } from '../../store/reducers';\nimport { Currency } from '../currency';\nimport { ProductIcon } from '../ui/icons/product';\nimport { ShoppingBagIcon } from '../ui/icons/shopping-bag';\nimport { TransactionIcon } from '../ui/icons/transactions';\nimport { UserName } from '../user/user-name';\nimport { UserDetailRouter } from './user-details-router';\nimport { ScrollContainer } from '../common/scroll-container/scroll-container';\nimport { en } from '../../locales/en';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst LinkTab: any = styled(Tab(NavLink))({\n  svg: {\n    marginRight: '0.5rem',\n  },\n});\n\nconst UserHeader = withTheme(\n  styled('div')(\n    {\n      margin: '0 auto',\n\n      h1: {\n        textTransform: 'none',\n        fontSize: '2rem',\n        textAlign: 'center',\n        margin: '1rem auto',\n      },\n    },\n    props => ({\n      padding: '0 1rem',\n      [props.theme.breakPoints.tablet]: {\n        width: '29rem',\n      },\n      h1: {\n        color: props.theme.primary,\n      },\n    })\n  )\n);\n\nconst toggleTab = (\n  url: string,\n  currentUrl: string,\n  userUrl: string\n): string => {\n  return url === currentUrl ? userUrl : url;\n};\n\nexport interface UserDetailsHeaderProps extends RouteComponentProps {\n  user: User;\n}\n\nconst Component = ({ user, location }: UserDetailsHeaderProps) => {\n  const currentUrl = location.pathname;\n  const userUrl = `/user/${user.id}`;\n  const settings = useSettings();\n  const intl = useIntl();\n\n  return (\n    <UserHeader>\n      <h1>\n        <UserName center name={user.name} />\n      </h1>\n      <h1 title={intl.formatMessage({ id: en.BALANCE_TITLE })}>\n        <AlertText value={user.balance}>\n          <Currency value={user.balance} />\n        </AlertText>\n      </h1>\n\n      <ScrollContainer style={{ justifyContent: 'space-between' }}>\n        <LinkTab\n          activeClassName=\"active\"\n          to={toggleTab(\n            `/user/${user.id}/send_money_to_a_friend`,\n            currentUrl,\n            userUrl\n          )}\n        >\n          <TransactionIcon />{' '}\n          <FormattedMessage id=\"USER_TRANSACTION_CREATE_LINK\" />\n        </LinkTab>\n        {settings.article.enabled && (\n          <LinkTab\n            activeClassName=\"active\"\n            to={toggleTab(`/user/${user.id}/article`, currentUrl, userUrl)}\n          >\n            <ShoppingBagIcon /> <FormattedMessage id=\"USER_ARTICLE_LINK\" />\n          </LinkTab>\n        )}\n        <LinkTab\n          activeClassName=\"active\"\n          to={toggleTab(`/user/${user.id}/edit`, currentUrl, userUrl)}\n        >\n          <ProductIcon /> <FormattedMessage id=\"USER_EDIT_LINK\" />\n        </LinkTab>\n        {settings.paypal.enabled && (\n          <LinkTab\n            activeClassName=\"active\"\n            to={toggleTab(`/user/${user.id}/paypal`, currentUrl, userUrl)}\n          >\n            <Icon width=\"1rem\" height=\"1rem\">\n              <PayPal />\n            </Icon>{' '}\n            <FormattedMessage id=\"PAYPAL_LINK\" defaultMessage=\"Paypal\" />\n          </LinkTab>\n        )}\n      </ScrollContainer>\n      <UserDetailRouter />\n    </UserHeader>\n  );\n};\n\nexport const UserDetailsHeader = withRouter(Component);\n","import * as React from 'react';\n\nimport { withRouter } from 'react-router';\nimport { UserRouteProps, getUserDetailLink } from '../user/user-router';\n\nimport { Separator } from 'bricks-of-sand';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst Component = (props: UserRouteProps): any => {\n  const id = props.match.params.id;\n  const pathname = getUserDetailLink(id);\n\n  return pathname === props.history.location.pathname ? null : (\n    <Separator margin=\"2rem 0 0 0\" padding=\"2rem 0 0 0\" />\n  );\n};\n\nexport const UserDetailsSeparator = withRouter(Component);\n","import * as React from 'react';\nimport { useEffect } from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router';\n\nconst Component: React.FC<RouteComponentProps> = props => {\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [props.location.pathname]);\n  return null;\n};\n\nexport const ScrollToTop = withRouter(Component);\n","import { Button, Flex } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { RouteComponentProps } from 'react-router';\nimport { useDispatch } from 'redux-react-hook';\n\nimport { useUser, useSettings, useIsPaymentEnabled } from '../../store';\nimport {\n  startLoadingTransactions,\n  startLoadingUserDetails,\n} from '../../store/reducers';\nimport { ArticleScanner } from '../article/article-scanner';\nimport { Payment, TransactionListItem } from '../transaction';\nimport { TransactionIcon } from '../ui/icons/transactions';\nimport { UserDetailsHeader } from '../user-details/user-details-header';\nimport { UserDetailsSeparator } from '../user-details/user-details-separator';\nimport { getUserDetailLink, getUserTransactionsLink } from './user-router';\nimport { ScrollToTop } from '../common/scroll-to-top';\n\n// @ts-ignore\nimport styles from './user-details.module.css';\n\ntype UserDetailsProps = RouteComponentProps<{ id: string }>;\nexport const UserDetails = (props: UserDetailsProps) => {\n  const dispatch = useDispatch();\n  const userId = props.match.params.id;\n  const user = useUser(userId);\n  const inputRef = React.useRef(null);\n  const payment = useSettings().payment;\n  const isPaymentEnabled = useIsPaymentEnabled();\n\n  React.useEffect(() => {\n    startLoadingTransactions(dispatch, userId);\n    startLoadingUserDetails(dispatch, userId);\n    if (inputRef && inputRef.current) {\n      // @ts-ignore\n      inputRef.current.focus();\n      // @ts-ignore\n      inputRef.current.blur();\n    }\n  }, [props.match.params.id]);\n\n  if (!user) {\n    return <>LOADING...</>;\n  }\n\n  const transactions = user.transactions\n    ? Object.keys(user.transactions)\n        .map(a => Number(a))\n        .sort((a, b) => b - a)\n        .slice(0, 5)\n    : [];\n  return (\n    <div>\n      <ScrollToTop />\n      <input ref={inputRef} type=\"text\" hidden tabIndex={-1} />\n      <ArticleScanner userId={user.id} />\n      <UserDetailsHeader user={user} />\n      <UserDetailsSeparator />\n      <div className={styles.userDetailsGrid}>\n        {isPaymentEnabled && (\n          <div className={styles.payment}>\n            <Payment userId={user.id} />\n          </div>\n        )}\n        {payment.transactions.enabled && (\n          <>\n            {transactions.length ? (\n              <div className={styles.transactions}>\n                {transactions.map(id => (\n                  <TransactionListItem key={id} id={id} />\n                ))}\n                <Flex justifyContent=\"flex-end\">\n                  <Button\n                    onClick={() =>\n                      props.history.push(getUserTransactionsLink(user.id))\n                    }\n                  >\n                    <TransactionIcon />{' '}\n                    <FormattedMessage id=\"USER_TRANSACTIONS_LINK\" />\n                  </Button>\n                </Flex>\n              </div>\n            ) : (\n              <Flex alignContent=\"center\" justifyContent=\"center\">\n                <FormattedMessage id=\"TRANSACTION_EMPTY_STATE\" />\n              </Flex>\n            )}\n          </>\n        )}\n      </div>\n      <Flex justifyContent=\"flex-end\" margin=\"1rem\">\n        <Button\n          onClick={() =>\n            props.history.push(`${getUserDetailLink(user.id)}/metrics`)\n          }\n        >\n          <TransactionIcon /> <FormattedMessage id=\"METRICS_HEADLINE\" />\n        </Button>\n      </Flex>\n    </div>\n  );\n};\n","import { Flex, PrimaryButton } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nfunction isPrevDisabled(props: PagerProps): boolean {\n  return props.currentPage === 0;\n}\n\nfunction getPageCount(props: PagerProps): number {\n  return props.itemCount / props.limit;\n}\n\nfunction pageUp(props: PagerProps): void {\n  const nextPage = props.currentPage + 1;\n  props.onChange(nextPage);\n}\nfunction pageDown(props: PagerProps): void {\n  const nextPage = props.currentPage - 1;\n  props.onChange(nextPage);\n}\n\nfunction isNextDisabled(props: PagerProps): boolean {\n  const pageCount = getPageCount(props);\n  return pageCount - props.currentPage < 1;\n}\n\nexport interface PagerProps {\n  currentPage: number;\n  itemCount: number;\n  limit: number;\n  onChange(nextPage: number): void;\n}\n\nexport function Pager(props: PagerProps): JSX.Element {\n  return (\n    <Flex margin=\"1rem 0\" alignContent=\"center\" justifyContent=\"space-between\">\n      <PrimaryButton\n        fontSize=\"1rem\"\n        onClick={() => pageDown(props)}\n        disabled={isPrevDisabled(props)}\n      >\n        &#8592; <FormattedMessage id=\"PAGER_PREV\" />\n      </PrimaryButton>\n      <PrimaryButton\n        fontSize=\"1rem\"\n        onClick={() => pageUp(props)}\n        disabled={isNextDisabled(props)}\n      >\n        <FormattedMessage id=\"PAGER_NEXT\" /> &#8594;\n      </PrimaryButton>\n    </Flex>\n  );\n}\n","import * as React from 'react';\nimport { store } from '../../store';\nimport { Transaction, startLoadingTransactions } from '../../store/reducers';\nimport { Pager } from '../common/pager';\nimport { getUserTransactionsLink } from '../user/user-router';\nimport { TransactionListItem } from './transaction-list-item';\n\ninterface Props {\n  userId: string;\n  page: number;\n  onPageChange(url: string): void;\n}\n\ninterface State {\n  limit: number;\n  offset: number;\n  itemCount: number;\n  transactions: Transaction[];\n}\n\nlet lastPage = 0;\n\nexport class TransactionTable extends React.Component<Props, State> {\n  public state = {\n    limit: 15,\n    offset: 0,\n    itemCount: 0,\n    transactions: [],\n  };\n\n  public componentDidMount(): void {\n    this.loadRows();\n  }\n\n  public componentDidUpdate(): void {\n    if (lastPage !== this.props.page) {\n      this.loadRows();\n      lastPage = this.props.page;\n    }\n  }\n\n  public next = (nextPage: number) => {\n    const url = getUserTransactionsLink(this.props.userId, nextPage);\n\n    this.props.onPageChange(url);\n  };\n\n  public getLimitAndOffset = (): { limit: number; offset: number } => {\n    const { page } = this.props;\n    const limit = this.state.limit;\n    const offset = limit * page;\n\n    return { limit, offset };\n  };\n\n  public loadRows = async (): Promise<void> => {\n    const { limit, offset } = this.getLimitAndOffset();\n    const res = await startLoadingTransactions(\n      store.dispatch,\n      this.props.userId,\n      offset,\n      limit\n    );\n    if (res && res.transactions && res.count) {\n      this.setState({ transactions: res.transactions, itemCount: res.count });\n    }\n  };\n\n  public render(): JSX.Element {\n    return (\n      <>\n        <Pager\n          itemCount={this.state.itemCount}\n          currentPage={this.props.page}\n          limit={this.state.limit}\n          onChange={this.next}\n        />\n        <TransactionPage transactions={this.state.transactions} />\n        <Pager\n          itemCount={this.state.itemCount}\n          currentPage={this.props.page}\n          limit={this.state.limit}\n          onChange={this.next}\n        />\n      </>\n    );\n  }\n}\n\nfunction TransactionPage(props: { transactions: Transaction[] }): JSX.Element {\n  return (\n    <>\n      {props.transactions.map(transaction => (\n        <TransactionListItem key={transaction.id} id={transaction.id} />\n      ))}\n    </>\n  );\n}\n","import { Block } from 'bricks-of-sand';\nimport * as React from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { TransactionTable } from '../../transaction/transaction-table';\nimport { ScrollToTop } from '../../common/scroll-to-top';\n\nexport type TransactionOverviewProps = RouteComponentProps<{\n  id: string;\n  page: string;\n}>;\n\nexport function TransactionOverview(\n  props: TransactionOverviewProps\n): JSX.Element {\n  const { id, page } = props.match.params;\n  return (\n    <Block margin=\"1rem\">\n      <ScrollToTop />\n\n      <TransactionTable\n        onPageChange={url => props.history.push(url)}\n        page={Number(page)}\n        userId={id}\n      />\n    </Block>\n  );\n}\n","import { styled, withTheme } from 'bricks-of-sand';\nimport * as React from 'react';\n\nexport interface AddIconProps {\n  isPrimary?: boolean;\n}\n\nfunction Icon(): JSX.Element {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n    >\n      <polygon points=\"9 7 16 7 16 9 9 9 9 16 7 16 7 9 0 9 0 7 7 7 7 0 9 0\" />\n    </svg>\n  );\n}\n\nexport const AddIcon = withTheme(\n  styled(Icon)<AddIconProps>({}, props => ({\n    fill: props.isPrimary ? props.theme.primary : props.theme.white,\n  }))\n);\nexport const CancelIcon = styled(Icon)<AddIconProps>({\n  transform: 'rotate(45deg)',\n});\n","import * as React from 'react';\n\nexport function EditIcon(): JSX.Element {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n    >\n      <path d=\"M3,3 L6,3 L6,5 L3,5 C2.44771525,5 2,5.44771525 2,6 L2,13 C2,13.5522847 2.44771525,14 3,14 L10,14 C10.5522847,14 11,13.5522847 11,13 L11,10 L13,10 L13,13 C13,14.6568542 11.6568542,16 10,16 L3,16 C1.34314575,16 0,14.6568542 0,13 L0,6 C0,4.34314575 1.34314575,3 3,3 Z M11,2 L14,5 L7,12 L4,12 L4,9 L11,2 Z M12,1 C13.2893219,-0.201010127 14.5929291,-0.201010127 15,1 C16.2010101,1.40707089 16.2010101,2.71067812 15,4 L12,1 Z\" />\n    </svg>\n  );\n}\n","import * as React from 'react';\n\nimport {\n  Button,\n  Card,\n  Flex,\n  Input,\n  PrimaryButton,\n  styled,\n  withTheme,\n} from 'bricks-of-sand';\nimport { useIntl } from 'react-intl';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\nimport { useDispatch } from 'redux-react-hook';\n\nimport { startCreatingUser } from '../../store/reducers';\nimport { AddIcon } from '../ui/icons/add';\nimport { EditIcon } from '../ui/icons/edit';\n\ninterface Props {\n  isActive: boolean;\n}\n\nconst TRANSITION = 'all 0.5s ease-out';\nconst Trigger = styled('div')<Props>(\n  {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    height: '6rem',\n    form: {\n      overflow: 'hidden',\n      transition: TRANSITION,\n      input: {\n        border: 'none',\n        minWidth: '7rem',\n        marginRight: '1rem',\n      },\n    },\n  },\n  props => ({\n    borderRadius: props.isActive ? '4px' : '100%',\n    svg: {\n      fill: props.theme.themedWhite,\n      transform: props.isActive ? 'rotate(45deg)' : 'rotate(0deg)',\n    },\n    form: {\n      width: props.isActive ? 'auto' : '0rem',\n    },\n  })\n);\n\nconst RedBlackButton = withTheme(\n  styled(Button)<Props>(\n    {\n      backgroundColor: 'none',\n    },\n    props => ({\n      '&:hover': {\n        background: props.isActive ? props.theme.red : props.theme.primary,\n      },\n      svg: {\n        fill: props.theme.themedWhite,\n      },\n      background: props.isActive ? props.theme.red : props.theme.primary,\n    })\n  )\n);\n\nexport const CreateUserInlineForm = ({\n  history,\n  isActive,\n}: Props & RouteComponentProps) => {\n  const [name, setName] = React.useState('');\n  const dispatch = useDispatch();\n  const intl = useIntl();\n\n  const submit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const trimmedName = name.trim();\n    if (name) {\n      const user = await startCreatingUser(dispatch, trimmedName);\n      if (user && user.id) {\n        history.push(`/user/${user.id}`);\n      }\n    } else {\n      setName('');\n    }\n  };\n  const toggle = () => {\n    if (isActive) {\n      history.goBack();\n      setName('');\n    } else {\n      history.push(history.location.pathname + '/add');\n    }\n  };\n\n  return (\n    <Trigger\n      title={intl.formatMessage({ id: 'USER_CREATE_NAME_LABEL' })}\n      isActive={isActive}\n    >\n      <RedBlackButton isActive={isActive} onClick={toggle} isRound>\n        <AddIcon />\n      </RedBlackButton>\n      {isActive && (\n        <Card\n          flex\n          height=\"6rem\"\n          alignItems=\"center\"\n          margin=\"0 0 0 1rem\"\n          level=\"level3\"\n        >\n          <form onSubmit={submit}>\n            <Flex>\n              <Input\n                value={name}\n                onChange={e => setName(e.target.value)}\n                placeholder={intl.formatMessage({\n                  id: 'USER_CREATE_NAME_LABEL',\n                })}\n                type=\"text\"\n                required\n                minLength={1}\n                maxLength={64}\n                autoFocus={true}\n              />\n              <PrimaryButton type=\"submit\" isRound>\n                <EditIcon />\n              </PrimaryButton>\n            </Flex>\n          </form>\n        </Card>\n      )}\n    </Trigger>\n  );\n};\n\nexport const CreateUserInlineFormView = withRouter(CreateUserInlineForm);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport InfiniteScroll from 'react-infinite-scroll-component';\n\nimport { AutoGrid } from 'bricks-of-sand';\nimport { UserCard } from '.';\nimport { useInfiniteScrolling } from '../common/search-list/search-list';\nimport { useUserDetailUrl } from './user-router';\n\ntype UserListComponent = React.FC<{ userIds: string[] }>;\ntype RedirectUserListComponent = React.FC<{\n  userIds: string[];\n}>;\nconst PAGE_SIZE = 25;\n\nexport const UserList: UserListComponent = ({ userIds }) => {\n  if (userIds.length < PAGE_SIZE) {\n    return <PlainUserList userIds={userIds} />;\n  }\n  return <InfiniteUserList userIds={userIds} />;\n};\n\nconst PlainUserList: RedirectUserListComponent = ({ userIds }) => {\n  const getUserDetailUrl = useUserDetailUrl();\n  return (\n    <AutoGrid rows=\"5rem\" columns=\"8rem\">\n      {userIds.map(id => (\n        <Link key={id} to={getUserDetailUrl(id)}>\n          <UserCard id={id} />\n        </Link>\n      ))}\n    </AutoGrid>\n  );\n};\n\nconst InfiniteUserList: RedirectUserListComponent = ({ userIds }) => {\n  const props = useInfiniteScrolling(userIds, PAGE_SIZE);\n  return (\n    <div style={{ marginTop: '-1rem' }}>\n      <InfiniteScroll {...props}>\n        <PlainUserList userIds={props.items} />\n      </InfiniteScroll>\n    </div>\n  );\n};\n","import { breakPoints, styled } from 'bricks-of-sand';\nimport React, { useEffect } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { RouteComponentProps } from 'react-router-dom';\n\nimport { useFilteredUsers } from '../../../store';\nimport { startLoadingUsers } from '../../../store/reducers';\nimport { NavTabMenus } from '../../common/nav-tab-menu';\nimport { CreateUserInlineFormView } from '../create-user-inline-form';\nimport { useDispatch } from 'redux-react-hook';\nimport { ScrollToTop } from '../../common/scroll-to-top';\nimport { UserList } from '../user-list';\n\ninterface OwnProps {\n  isActive: boolean;\n  showCreateUserForm?: boolean;\n}\n\ntype UserProps = OwnProps & RouteComponentProps;\n\nconst GridWrapper = styled('div')({\n  marginLeft: '0rem',\n  [breakPoints.tablet]: {\n    marginLeft: '8rem',\n  },\n});\n\nconst CreateUserPosition = styled('div')({\n  [breakPoints.tablet]: {\n    zIndex: 10,\n    position: 'absolute',\n    marginLeft: '-2rem',\n    marginTop: '6rem',\n    bottom: 'initial',\n    left: 'initial',\n  },\n  position: 'fixed',\n  bottom: '1rem',\n  left: '1rem',\n  zIndex: 10,\n});\n\nexport const User = (props: UserProps) => {\n  const userIds = useFilteredUsers(props.isActive);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    startLoadingUsers(dispatch);\n  }, [props.isActive, dispatch]);\n\n  return (\n    <>\n      <ScrollToTop />\n      <GridWrapper>\n        <CreateUserPosition>\n          <CreateUserInlineFormView\n            isActive={props.showCreateUserForm || false}\n          />\n        </CreateUserPosition>\n        <NavTabMenus\n          margin=\"2rem 1rem\"\n          breakpoint={320}\n          label={<FormattedMessage id=\"USER_ACTIVE_LINK\" />}\n          tabs={[\n            {\n              to: '/user/active',\n              message: <FormattedMessage id=\"USER_ACTIVE_LINK\" />,\n            },\n            {\n              to: '/user/inactive',\n              message: <FormattedMessage id=\"USER_INACTIVE_LINK\" />,\n            },\n          ]}\n        />\n        <UserList userIds={userIds} />\n      </GridWrapper>\n    </>\n  );\n};\n","import React, { useEffect } from 'react';\nimport { useDispatch } from 'redux-react-hook';\nimport { startLoadingUsers, User } from '../../../store/reducers';\nimport { useUserArray } from '../../../store';\nimport { SearchList } from '../search-list/search-list';\nimport { SearchResultItem } from './search-result-item/search-result-item';\nimport { RouteComponentProps } from 'react-router';\nimport { useUserDetailUrl } from '../../user/user-router';\n\nexport const SearchResults: React.FC<RouteComponentProps> = props => {\n  const userArray = useUserArray();\n  const dispatch = useDispatch();\n  const userDetailUrl = useUserDetailUrl();\n  useEffect(() => {\n    startLoadingUsers(dispatch);\n  }, [dispatch]);\n\n  return (\n    <div style={{ margin: '1rem' }}>\n      <SearchList\n        pageSize={10}\n        renderItem={(user: User) => (\n          <SearchResultItem\n            key={user.id}\n            name={user.name}\n            onClick={() => props.history.push(userDetailUrl(user.id))}\n          />\n        )}\n        items={userArray}\n      ></SearchList>\n    </div>\n  );\n};\n","import * as React from 'react';\nimport { HashRouter, Redirect, Route, Switch } from 'react-router-dom';\nimport { StoreContext, useDispatch } from 'redux-react-hook';\n\nimport {\n  Global,\n  Theme,\n  ThemeProvider,\n  dark,\n  light,\n  resetCss,\n  styled,\n} from 'bricks-of-sand';\nimport { ArticleRouter } from './components/article/article-router';\nimport { en } from './locales/en';\nimport { ErrorMessage } from './components/common/error-message';\nimport { HeaderMenu } from './components/common/header-menu';\nimport { IntlProvider } from 'react-intl';\nimport { MainFooter, baseCss, mobileStyles } from './components/ui';\nimport { SearchResults } from './components/common/search-results';\nimport { SplitInvoiceForm } from './components/transaction';\nimport { startLoadingSettings } from './store/reducers';\nimport { store } from './store';\nimport { UserRouter } from './components/user/user-router';\nimport { useScalingState } from './components/settings/scaling-buttons';\n\n// tslint:disable-next-line:no-import-side-effect\nimport 'inter-ui';\nimport { MetricsView } from './components/metrics';\nimport { WrappedIdleTimer } from './components/common/idle-timer';\n\nconst newLight: Theme = {\n  ...light,\n  greenLight: '#D4E8D3',\n  greenText: '#6F9C7A',\n};\nconst newDark: Theme = {\n  ...dark,\n  red: '#FFBAC2',\n  green: '#C2FFCD',\n  greenLight: 'rgba(36,200,65,0.20)',\n  redLight: ' rgba(226,87,102,0.20)',\n};\n\nconst Grid = styled('div')({\n  display: 'grid',\n  gridTemplateRows: '4rem 1fr 4rem',\n  minHeight: '100vh',\n});\n\nconst TouchStyles = () => {\n  const isTouchDevice = 'ontouchstart' in window || navigator.msMaxTouchPoints;\n  if (isTouchDevice) {\n    return <Global styles={mobileStyles} />;\n  }\n  return null;\n};\n\nconst Layout = () => {\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    startLoadingSettings(dispatch);\n  }, [dispatch]);\n\n  const { scaling } = useScalingState();\n\n  return (\n    <Grid>\n      <Global styles={resetCss} />\n      <Global styles={baseCss(scaling)} />\n      <TouchStyles />\n      <ErrorMessage />\n      <HeaderMenu />\n      <Switch>\n        <Route path=\"/user\" component={UserRouter} />\n        <Route\n          path=\"/articles\"\n          render={() => (\n            <>\n              <WrappedIdleTimer />\n              <ArticleRouter />\n            </>\n          )}\n        />\n        <Route\n          path=\"/split-invoice\"\n          render={() => (\n            <>\n              <WrappedIdleTimer />\n              <SplitInvoiceForm />\n            </>\n          )}\n        />\n        <Route\n          path=\"/metrics\"\n          render={() => (\n            <>\n              <WrappedIdleTimer />\n              <MetricsView />\n            </>\n          )}\n        />\n        <Route\n          path=\"/search-results\"\n          render={props => (\n            <>\n              <WrappedIdleTimer />\n              <SearchResults {...props} />\n            </>\n          )}\n        />\n        <Redirect from=\"/\" to=\"/user/active\" />\n      </Switch>\n      <MainFooter />\n    </Grid>\n  );\n};\n\nclass App extends React.Component {\n  // tslint:disable-next-line:prefer-function-over-method\n  public render(): JSX.Element {\n    return (\n      <ThemeProvider themes={{ light: newLight, dark: newDark }}>\n        <StoreContext.Provider value={store}>\n          <IntlProvider\n            textComponent={React.Fragment}\n            locale=\"en\"\n            messages={en}\n          >\n            <HashRouter hashType=\"hashbang\">\n              <Layout />\n            </HashRouter>\n          </IntlProvider>\n        </StoreContext.Provider>\n      </ThemeProvider>\n    );\n  }\n}\n\n// tslint:disable-next-line:no-default-export\nexport default App;\n","/* eslint-disable no-console */\n/* eslint-disable @typescript-eslint/no-use-before-define */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport App from './app';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root') as HTMLElement);\nserviceWorker.register();\n"],"sourceRoot":""}